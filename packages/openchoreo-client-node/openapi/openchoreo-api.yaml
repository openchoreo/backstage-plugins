# Copyright 2025 The OpenChoreo Authors
# SPDX-License-Identifier: Apache-2.0

openapi: 3.0.3
info:
  title: OpenChoreo API
  version: 1.0.0
  description: |
    REST API for OpenChoreo Internal Developer Platform.

    OpenChoreo provides Kubernetes-native abstractions for developers and platform engineers,
    implementing a multi-plane architecture with control plane and data plane separation.
  contact:
    name: OpenChoreo
    url: https://github.com/openchoreo/openchoreo
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0

servers:
  - url: http://localhost:8080
    description: Local development

# Default security - JWT Bearer token required
# Individual endpoints can override with `security: []` for public access
security:
  - bearerAuth: []

tags:
  - name: Operations
    description: Health, readiness, and version endpoints
  - name: Namespaces
    description: Namespace management
  - name: Projects
    description: Project management within namespaces
  - name: Components
    description: Component management within projects
  - name: Environments
    description: Environment management within namespaces
  - name: DataPlanes
    description: DataPlane management for workload deployment targets
  - name: BuildPlanes
    description: BuildPlane management for CI/CD build infrastructure
  - name: ObservabilityPlanes
    description: ObservabilityPlane management for monitoring and logging
  - name: ClusterDataPlanes
    description: Cluster-scoped DataPlane management
  - name: ClusterBuildPlanes
    description: Cluster-scoped BuildPlane management
  - name: ClusterObservabilityPlanes
    description: Cluster-scoped ObservabilityPlane management
  - name: ComponentTypes
    description: ComponentType templates defined by platform engineers
  - name: Traits
    description: Trait templates for composable cross-cutting concerns
  - name: Workflows
    description: Generic workflow templates
  - name: ComponentWorkflows
    description: Component-specific workflow templates and runs
  - name: Authorization
    description: Role-based access control and authorization management
  - name: Webhooks
    description: Git provider webhook handlers
  - name: SecretReferences
    description: Secret reference management
  - name: Workloads
    description: Workload source code definitions
  - name: DeploymentPipelines
    description: Deployment pipeline management

paths:
  # =============================================================================
  # Public Endpoints (No Authentication Required)
  # =============================================================================

  /health:
    get:
      operationId: getHealth
      summary: Health check
      description: Returns OK if the server is healthy. Used for liveness probes.
      tags: [Operations]
      security: []
      responses:
        '200':
          description: Server is healthy
          content:
            text/plain:
              schema:
                type: string
                example: OK

  /ready:
    get:
      operationId: getReady
      summary: Readiness check
      description: Returns Ready if the server is ready to accept requests. Used for readiness probes.
      tags: [Operations]
      security: []
      responses:
        '200':
          description: Server is ready
          content:
            text/plain:
              schema:
                type: string
                example: Ready

  /version:
    get:
      operationId: getVersion
      summary: Get server version
      description: Returns version information about the API server.
      tags: [Operations]
      security: []
      responses:
        '200':
          description: Version information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VersionResponse'

  /openapi.json:
    get:
      operationId: getOpenAPISpec
      summary: Get OpenAPI specification
      description: Returns the OpenAPI 3.0 specification for this API in JSON format.
      tags: [Operations]
      security: []
      responses:
        '200':
          description: OpenAPI specification
          content:
            application/json:
              schema:
                type: object
                description: OpenAPI 3.0 specification document

  /.well-known/oauth-protected-resource:
    get:
      operationId: getOAuthProtectedResourceMetadata
      summary: Get OAuth protected resource metadata
      description: |
        Returns OAuth 2.0 protected resource metadata as defined in RFC 9728.
        Used by MCP clients to discover authorization server information.
      tags: [Operations]
      security: []
      responses:
        '200':
          description: OAuth protected resource metadata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OAuthProtectedResourceMetadata'

  /.well-known/openid-configuration:
    get:
      operationId: getOpenIDConfiguration
      summary: Get OpenID configuration
      description: |
        Returns OpenID Connect configuration for CLI authentication.
        Includes OAuth2 endpoints, external client configurations, and security status.
      tags: [Operations]
      security: []
      responses:
        '200':
          description: OpenID configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientConfigList'

  # =============================================================================
  # Namespace Endpoints
  # =============================================================================

  /api/v1/namespaces:
    get:
      operationId: listNamespaces
      summary: List namespaces
      description: |
        Returns a paginated list of OpenChoreo control plane namespaces the user has access to.
        Only namespaces with the label `openchoreo.dev/controlplane-namespace=true` are returned.
        This filters out system namespaces (e.g., openchoreo-control-plane, kube-system) and 
        data plane runtime namespaces.
      tags: [Namespaces]
      parameters:
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of namespaces
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NamespaceList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createNamespace
      summary: Create namespace
      description: |
        Creates a new OpenChoreo control plane namespace.
        The namespace is automatically labeled with `openchoreo.dev/controlplane-namespace=true`.
      tags: [Namespaces]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Namespace'
      responses:
        '201':
          description: Namespace created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Namespace'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          description: Namespace already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}:
    get:
      operationId: getNamespace
      summary: Get namespace
      description: Returns details of a specific namespace.
      tags: [Namespaces]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      responses:
        '200':
          description: Namespace details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Namespace'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateNamespace
      summary: Update namespace
      description: Replaces an existing namespace (full update).
      tags: [Namespaces]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Namespace'
      responses:
        '200':
          description: Namespace updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Namespace'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteNamespace
      summary: Delete namespace
      description: Deletes a namespace by name.
      tags: [Namespaces]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      responses:
        '204':
          description: Namespace deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # Project Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/projects:
    get:
      operationId: listProjects
      summary: List projects
      description: Returns a paginated list of projects within an namespace.
      tags: [Projects]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of projects
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createProject
      summary: Create project
      description: Creates a new project within an namespace.
      tags: [Projects]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Project'
      responses:
        '201':
          description: Project created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/projects/{projectName}:
    get:
      operationId: getProject
      summary: Get project
      description: Returns details of a specific project.
      tags: [Projects]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ProjectNameParam'
      responses:
        '200':
          description: Project details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateProject
      summary: Update project
      description: Replaces an existing project (full update).
      tags: [Projects]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ProjectNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Project'
      responses:
        '200':
          description: Project updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteProject
      summary: Delete project
      description: Deletes a project by name.
      tags: [Projects]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ProjectNameParam'
      responses:
        '204':
          description: Project deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # Component Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/components:
    get:
      operationId: listComponents
      summary: List components
      description: Returns a paginated list of components within a namespace, optionally filtered by project.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ProjectQueryParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of components
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponentList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createComponent
      summary: Create component
      description: Creates a new component within a namespace.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Component'
      responses:
        '201':
          description: Component created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Component'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # Environment Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/environments:
    get:
      operationId: listEnvironments
      summary: List environments
      description: Returns a paginated list of environments within an namespace.
      tags: [Environments]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of environments
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnvironmentList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createEnvironment
      summary: Create environment
      description: Creates a new environment within a namespace.
      tags: [Environments]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Environment'
      responses:
        '201':
          description: Environment created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Environment'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/environments/{envName}:
    get:
      operationId: getEnvironment
      summary: Get environment
      description: Returns details of a specific environment.
      tags: [Environments]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/EnvironmentNameParam'
      responses:
        '200':
          description: Environment details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Environment'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateEnvironment
      summary: Update environment
      description: Replaces an existing environment (full update).
      tags: [Environments]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/EnvironmentNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Environment'
      responses:
        '200':
          description: Environment updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Environment'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteEnvironment
      summary: Delete environment
      description: Deletes an environment by name.
      tags: [Environments]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/EnvironmentNameParam'
      responses:
        '204':
          description: Environment deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/environments/{envName}/observer-url:
    get:
      operationId: getEnvironmentObserverURL
      summary: Get environment observer URL
      description: Returns the observer URL for accessing logs and metrics for this environment.
      tags: [Environments]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/EnvironmentNameParam'
      responses:
        '200':
          description: Observer URL information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ObserverURLResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/environments/{envName}/rca-agent-url:
    get:
      operationId: getRCAAgentURL
      summary: Get RCA agent URL
      description: Returns the RCA agent URL for AI-powered root cause analysis for this environment.
      tags: [Environments]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/EnvironmentNameParam'
      responses:
        '200':
          description: RCA agent URL information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RCAAgentURLResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # DataPlane Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/dataplanes:
    get:
      operationId: listDataPlanes
      summary: List data planes
      description: Returns a paginated list of data planes within an namespace.
      tags: [DataPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of data planes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataPlaneList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createDataPlane
      summary: Create data plane
      description: Creates a new data plane within a namespace.
      tags: [DataPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataPlane'
      responses:
        '201':
          description: DataPlane created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/dataplanes/{dpName}:
    get:
      operationId: getDataPlane
      summary: Get data plane
      description: Returns details of a specific data plane.
      tags: [DataPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/DataPlaneNameParam'
      responses:
        '200':
          description: DataPlane details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataPlane'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateDataPlane
      summary: Update data plane
      description: Replaces an existing data plane (full update).
      tags: [DataPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/DataPlaneNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataPlane'
      responses:
        '200':
          description: DataPlane updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteDataPlane
      summary: Delete data plane
      description: Deletes a data plane by name.
      tags: [DataPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/DataPlaneNameParam'
      responses:
        '204':
          description: DataPlane deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # BuildPlane Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/buildplanes:
    get:
      operationId: listBuildPlanes
      summary: List build planes
      description: Returns a list of build planes within a namespace. Typically one per namespace.
      tags: [BuildPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      responses:
        '200':
          description: List of build planes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BuildPlaneList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createBuildPlane
      summary: Create build plane
      description: Creates a new build plane within a namespace.
      tags: [BuildPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BuildPlane'
      responses:
        '201':
          description: BuildPlane created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BuildPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/buildplanes/{bpName}:
    get:
      operationId: getBuildPlane
      summary: Get build plane
      description: Returns details of a specific build plane.
      tags: [BuildPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: bpName
          in: path
          required: true
          description: BuildPlane name
          schema:
            type: string
            example: default-buildplane
      responses:
        '200':
          description: BuildPlane details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BuildPlane'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateBuildPlane
      summary: Update build plane
      description: Replaces an existing build plane (full update).
      tags: [BuildPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: bpName
          in: path
          required: true
          description: BuildPlane name
          schema:
            type: string
            example: default-buildplane
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BuildPlane'
      responses:
        '200':
          description: BuildPlane updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BuildPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteBuildPlane
      summary: Delete build plane
      description: Deletes a build plane by name.
      tags: [BuildPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: bpName
          in: path
          required: true
          description: BuildPlane name
          schema:
            type: string
            example: default-buildplane
      responses:
        '204':
          description: BuildPlane deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # ObservabilityPlane Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/observabilityplanes:
    get:
      operationId: listObservabilityPlanes
      summary: List observability planes
      description: Returns a list of observability planes within a namespace.
      tags: [ObservabilityPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      responses:
        '200':
          description: List of observability planes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ObservabilityPlaneList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createObservabilityPlane
      summary: Create observability plane
      description: Creates a new observability plane within a namespace.
      tags: [ObservabilityPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ObservabilityPlane'
      responses:
        '201':
          description: ObservabilityPlane created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ObservabilityPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/observabilityplanes/{opName}:
    get:
      operationId: getObservabilityPlane
      summary: Get observability plane
      description: Returns details of a specific observability plane.
      tags: [ObservabilityPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: opName
          in: path
          required: true
          description: ObservabilityPlane name
          schema:
            type: string
            example: default-observability
      responses:
        '200':
          description: ObservabilityPlane details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ObservabilityPlane'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateObservabilityPlane
      summary: Update observability plane
      description: Replaces an existing observability plane (full update).
      tags: [ObservabilityPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: opName
          in: path
          required: true
          description: ObservabilityPlane name
          schema:
            type: string
            example: default-observability
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ObservabilityPlane'
      responses:
        '200':
          description: ObservabilityPlane updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ObservabilityPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteObservabilityPlane
      summary: Delete observability plane
      description: Deletes an observability plane by name.
      tags: [ObservabilityPlanes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: opName
          in: path
          required: true
          description: ObservabilityPlane name
          schema:
            type: string
            example: default-observability
      responses:
        '204':
          description: ObservabilityPlane deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # ClusterDataPlane Endpoints (Cluster-Scoped)
  # =============================================================================

  /api/v1/clusterdataplanes:
    get:
      operationId: listClusterDataPlanes
      summary: List cluster data planes
      description: Returns a paginated list of cluster-scoped data planes.
      tags: [ClusterDataPlanes]
      parameters:
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of cluster data planes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterDataPlaneList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createClusterDataPlane
      summary: Create cluster data plane
      description: Creates a new cluster-scoped data plane.
      tags: [ClusterDataPlanes]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClusterDataPlane'
      responses:
        '201':
          description: ClusterDataPlane created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterDataPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/clusterdataplanes/{cdpName}:
    get:
      operationId: getClusterDataPlane
      summary: Get cluster data plane
      description: Returns details of a specific cluster-scoped data plane.
      tags: [ClusterDataPlanes]
      parameters:
        - $ref: '#/components/parameters/ClusterDataPlaneNameParam'
      responses:
        '200':
          description: ClusterDataPlane details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterDataPlane'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateClusterDataPlane
      summary: Update cluster data plane
      description: Replaces an existing cluster-scoped data plane (full update).
      tags: [ClusterDataPlanes]
      parameters:
        - $ref: '#/components/parameters/ClusterDataPlaneNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClusterDataPlane'
      responses:
        '200':
          description: ClusterDataPlane updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterDataPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteClusterDataPlane
      summary: Delete cluster data plane
      description: Deletes a cluster-scoped data plane by name.
      tags: [ClusterDataPlanes]
      parameters:
        - $ref: '#/components/parameters/ClusterDataPlaneNameParam'
      responses:
        '204':
          description: ClusterDataPlane deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # ClusterBuildPlane Endpoints (Cluster-Scoped)
  # =============================================================================

  /api/v1/clusterbuildplanes:
    get:
      operationId: listClusterBuildPlanes
      summary: List cluster build planes
      description: Returns a list of cluster-scoped build planes.
      tags: [ClusterBuildPlanes]
      responses:
        '200':
          description: List of cluster build planes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterBuildPlaneList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createClusterBuildPlane
      summary: Create cluster build plane
      description: Creates a new cluster-scoped build plane.
      tags: [ClusterBuildPlanes]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClusterBuildPlane'
      responses:
        '201':
          description: ClusterBuildPlane created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterBuildPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/clusterbuildplanes/{cbpName}:
    get:
      operationId: getClusterBuildPlane
      summary: Get cluster build plane
      description: Returns details of a specific cluster-scoped build plane.
      tags: [ClusterBuildPlanes]
      parameters:
        - name: cbpName
          in: path
          required: true
          description: ClusterBuildPlane name
          schema:
            type: string
            example: shared-buildplane
      responses:
        '200':
          description: ClusterBuildPlane details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterBuildPlane'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateClusterBuildPlane
      summary: Update cluster build plane
      description: Replaces an existing cluster-scoped build plane (full update).
      tags: [ClusterBuildPlanes]
      parameters:
        - name: cbpName
          in: path
          required: true
          description: ClusterBuildPlane name
          schema:
            type: string
            example: shared-buildplane
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClusterBuildPlane'
      responses:
        '200':
          description: ClusterBuildPlane updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterBuildPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteClusterBuildPlane
      summary: Delete cluster build plane
      description: Deletes a cluster-scoped build plane by name.
      tags: [ClusterBuildPlanes]
      parameters:
        - name: cbpName
          in: path
          required: true
          description: ClusterBuildPlane name
          schema:
            type: string
            example: shared-buildplane
      responses:
        '204':
          description: ClusterBuildPlane deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # ClusterObservabilityPlane Endpoints (Cluster-Scoped)
  # =============================================================================

  /api/v1/clusterobservabilityplanes:
    get:
      operationId: listClusterObservabilityPlanes
      summary: List cluster observability planes
      description: Returns a list of cluster-scoped observability planes.
      tags: [ClusterObservabilityPlanes]
      responses:
        '200':
          description: List of cluster observability planes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterObservabilityPlaneList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createClusterObservabilityPlane
      summary: Create cluster observability plane
      description: Creates a new cluster-scoped observability plane.
      tags: [ClusterObservabilityPlanes]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClusterObservabilityPlane'
      responses:
        '201':
          description: ClusterObservabilityPlane created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterObservabilityPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/clusterobservabilityplanes/{copName}:
    get:
      operationId: getClusterObservabilityPlane
      summary: Get cluster observability plane
      description: Returns details of a specific cluster-scoped observability plane.
      tags: [ClusterObservabilityPlanes]
      parameters:
        - name: copName
          in: path
          required: true
          description: ClusterObservabilityPlane name
          schema:
            type: string
            example: shared-observability
      responses:
        '200':
          description: ClusterObservabilityPlane details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterObservabilityPlane'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateClusterObservabilityPlane
      summary: Update cluster observability plane
      description: Replaces an existing cluster-scoped observability plane (full update).
      tags: [ClusterObservabilityPlanes]
      parameters:
        - name: copName
          in: path
          required: true
          description: ClusterObservabilityPlane name
          schema:
            type: string
            example: shared-observability
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClusterObservabilityPlane'
      responses:
        '200':
          description: ClusterObservabilityPlane updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClusterObservabilityPlane'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteClusterObservabilityPlane
      summary: Delete cluster observability plane
      description: Deletes a cluster-scoped observability plane by name.
      tags: [ClusterObservabilityPlanes]
      parameters:
        - name: copName
          in: path
          required: true
          description: ClusterObservabilityPlane name
          schema:
            type: string
            example: shared-observability
      responses:
        '204':
          description: ClusterObservabilityPlane deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # ComponentType Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/component-types:
    get:
      operationId: listComponentTypes
      summary: List component types
      description: Returns a list of component types available in the namespace.
      tags: [ComponentTypes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of component types
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponentTypeList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/component-types/{ctName}/schema:
    get:
      operationId: getComponentTypeSchema
      summary: Get component type schema
      description: Returns the parameter schema for a specific component type.
      tags: [ComponentTypes]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentTypeNameParam'
      responses:
        '200':
          description: Component type schema
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SchemaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # Trait Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/traits:
    get:
      operationId: listTraits
      summary: List traits
      description: Returns a list of traits available in the namespace.
      tags: [Traits]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of traits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TraitList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/traits/{traitName}/schema:
    get:
      operationId: getTraitSchema
      summary: Get trait schema
      description: Returns the parameter schema for a specific trait.
      tags: [Traits]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/TraitNameParam'
      responses:
        '200':
          description: Trait schema
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SchemaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # Workflow Endpoints (Generic Workflows)
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/workflows:
    get:
      operationId: listWorkflows
      summary: List workflows
      description: Returns a list of generic workflows available in the namespace.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of workflows
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createWorkflow
      summary: Create workflow
      description: Creates a new generic workflow in the namespace.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Workflow'
      responses:
        '201':
          description: Workflow created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workflow'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/workflows/{workflowName}:
    get:
      operationId: getWorkflow
      summary: Get workflow
      description: Returns details of a specific workflow.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/WorkflowNameParam'
      responses:
        '200':
          description: Workflow details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workflow'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateWorkflow
      summary: Update workflow
      description: Replaces an existing workflow (full update).
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/WorkflowNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Workflow'
      responses:
        '200':
          description: Workflow updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workflow'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteWorkflow
      summary: Delete workflow
      description: Deletes a workflow by name.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/WorkflowNameParam'
      responses:
        '204':
          description: Workflow deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/workflows/{workflowName}/schema:
    get:
      operationId: getWorkflowSchema
      summary: Get workflow schema
      description: Returns the parameter schema for a specific workflow.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/WorkflowNameParam'
      responses:
        '200':
          description: Workflow schema
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SchemaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # WorkflowRun Endpoints (Generic Workflow Executions)
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/workflow-runs:
    get:
      operationId: listWorkflowRuns
      summary: List workflow runs
      description: Returns a list of generic workflow runs in the namespace.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of workflow runs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowRunList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createWorkflowRun
      summary: Create workflow run
      description: Triggers a new generic workflow run.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkflowRun'
      responses:
        '201':
          description: Workflow run created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowRun'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/workflow-runs/{runName}:
    get:
      operationId: getWorkflowRun
      summary: Get workflow run
      description: Returns details of a specific workflow run.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/WorkflowRunNameParam'
      responses:
        '200':
          description: Workflow run details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowRun'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteWorkflowRun
      summary: Delete workflow run
      description: Deletes a workflow run by name.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/WorkflowRunNameParam'
      responses:
        '204':
          description: Workflow run deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/workflow-runs/{runName}/status:
    get:
      operationId: getWorkflowRunStatus
      summary: Get workflow run status
      description: Returns the overall status and per-step status of a specific workflow run.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/WorkflowRunNameParam'
      responses:
        '200':
          description: Workflow run status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowRunStatusResponse'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/workflow-runs/{runName}/logs:
    get:
      operationId: getWorkflowRunLogs
      summary: Get workflow run logs
      description: Returns logs for a specific workflow run from the build plane. Logs are fetched live from the build plane; no archived logs are returned for completed runs.
      tags: [Workflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/WorkflowRunNameParam'
        - name: step
          in: query
          required: false
          description: Filter logs by step name
          schema:
            type: string
        - name: sinceSeconds
          in: query
          required: false
          description: Return logs newer than a relative duration in seconds
          schema:
            type: integer
            format: int64
            minimum: 0
      responses:
        '200':
          description: Workflow run logs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WorkflowRunLogEntry'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/workflow-runs/{runName}/events:
    get:
      operationId: getWorkflowRunEvents
      summary: Get workflow run events
      description: |
        Returns Kubernetes events associated with a namespace-level workflow run.
        Events are fetched from the build plane through the cluster gateway and
        aggregated across all relevant pods for the workflow and optional step filter.
      tags:
        - Workflows
      parameters:
        - name: namespaceName
          in: path
          required: true
          schema:
            type: string
        - name: runName
          in: path
          required: true
          schema:
            type: string
        - name: step
          in: query
          required: false
          description: Filter events by specific workflow step name
          schema:
            type: string
            example: build-step
      responses:
        '200':
          description: Workflow run events
          content:
            application/json:
              schema:
                type: array
                description: Array of event entries with timestamps
                items:
                  $ref: '#/components/schemas/WorkflowRunEventEntry'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Workflow run not found
        '500':
          description: Internal server error

  # =============================================================================
  # ComponentWorkflow Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/component-workflows:
    get:
      operationId: listComponentWorkflows
      summary: List component workflows
      description: Returns a list of component workflow templates available in the namespace.
      tags: [ComponentWorkflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of component workflows
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponentWorkflowTemplateList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/component-workflows/{cwName}/schema:
    get:
      operationId: getComponentWorkflowSchema
      summary: Get component workflow schema
      description: Returns the parameter schema for a specific component workflow.
      tags: [ComponentWorkflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentWorkflowNameParam'
      responses:
        '200':
          description: Component workflow schema
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SchemaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/components/{componentName}:
    get:
      operationId: getComponent
      summary: Get component
      description: Returns details of a specific component.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentNameParam'
      responses:
        '200':
          description: Component details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Component'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateComponent
      summary: Update component
      description: Replaces an existing component (full update).
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Component'
      responses:
        '200':
          description: Component updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Component'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteComponent
      summary: Delete component
      description: Deletes a component by name.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentNameParam'
      responses:
        '204':
          description: Component deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/components/{componentName}/schema:
    get:
      operationId: getComponentSchema
      summary: Get component schema
      description: Returns the combined parameter schema for a component (ComponentType + Traits).
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentNameParam'
      responses:
        '200':
          description: Component schema
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SchemaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/component-releases:
    get:
      operationId: listComponentReleases
      summary: List component releases
      description: Returns immutable release snapshots in a namespace, optionally filtered by project or component.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ProjectQueryParam'
        - $ref: '#/components/parameters/ComponentQueryParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of component releases
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponentReleaseList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/component-releases/{releaseName}:
    get:
      operationId: getComponentRelease
      summary: Get component release
      description: Returns details of a specific component release.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ReleaseNameParam'
      responses:
        '200':
          description: Component release details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponentRelease'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteComponentRelease
      summary: Delete component release
      description: Deletes a component release.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ReleaseNameParam'
      responses:
        '204':
          description: Component release deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/component-releases/{releaseName}/schema:
    get:
      operationId: getComponentReleaseSchema
      summary: Get component release schema
      description: Returns the parameter schema for a component release.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ReleaseNameParam'
      responses:
        '200':
          description: Component release schema
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SchemaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/release-bindings:
    get:
      operationId: listReleaseBindings
      summary: List release bindings
      description: Returns environment-specific release bindings in a namespace, optionally filtered by project, component, or environment.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ProjectQueryParam'
        - $ref: '#/components/parameters/ComponentQueryParam'
        - $ref: '#/components/parameters/EnvironmentQueryParam'
      responses:
        '200':
          description: List of release bindings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReleaseBindingList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createReleaseBinding
      summary: Create release binding
      description: Creates a new environment-specific release binding.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReleaseBinding'
      responses:
        '201':
          description: Release binding created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReleaseBinding'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/release-bindings/{bindingName}:
    get:
      operationId: getReleaseBinding
      summary: Get release binding
      description: Returns details of a specific release binding.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/BindingNameParam'
      responses:
        '200':
          description: Release binding details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReleaseBinding'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateReleaseBinding
      summary: Update release binding
      description: Replaces a release binding with environment-specific overrides (full update).
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/BindingNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReleaseBinding'
      responses:
        '200':
          description: Release binding updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReleaseBinding'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteReleaseBinding
      summary: Delete release binding
      description: Deletes a release binding.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/BindingNameParam'
      responses:
        '204':
          description: Release binding deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/releases:
    get:
      operationId: listReleases
      summary: List releases
      description: Returns deployed releases in a namespace, optionally filtered by component or environment.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentQueryParam'
        - $ref: '#/components/parameters/EnvironmentQueryParam'
      responses:
        '200':
          description: List of releases
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReleaseList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/components/{componentName}/deploy:
    post:
      operationId: deployRelease
      summary: Deploy release
      description: Deploys a component release to an environment.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeployReleaseRequest'
      responses:
        '201':
          description: Release deployed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReleaseBinding'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/components/{componentName}/promote:
    post:
      operationId: promoteComponent
      summary: Promote component
      description: Promotes a component release from one environment to another.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromoteComponentRequest'
      responses:
        '200':
          description: Component promoted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReleaseBinding'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/components/{componentName}/observer-url:
    get:
      operationId: getBuildObserverURL
      summary: Get build observer URL
      description: Returns the observer URL for component build logs.
      tags: [Components]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentNameParam'
      responses:
        '200':
          description: Observer URL
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ObserverURLResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/components/{componentName}/workflow-parameters:
    put:
      operationId: updateComponentWorkflowParameters
      summary: Update component workflow parameters
      description: Updates the workflow parameters for a component.
      tags: [ComponentWorkflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ComponentNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateComponentWorkflowRequest'
      responses:
        '200':
          description: Workflow parameters updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Component'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/component-workflow-runs:
    get:
      operationId: listComponentWorkflowRuns
      summary: List component workflow runs
      description: Returns a list of workflow runs in a namespace, optionally filtered by project or component.
      tags: [ComponentWorkflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ProjectQueryParam'
        - $ref: '#/components/parameters/ComponentQueryParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/CursorParam'
      responses:
        '200':
          description: List of workflow runs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponentWorkflowRunList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createComponentWorkflowRun
      summary: Trigger component workflow run
      description: Triggers a new workflow run (build) for a component.
      tags: [ComponentWorkflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: commit
          in: query
          required: false
          description: Specific git commit SHA to build (optional)
          schema:
            type: string
            example: abc1234
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ComponentWorkflowRun'
      responses:
        '201':
          description: Workflow run triggered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponentWorkflowRun'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/component-workflow-runs/{runName}:
    get:
      operationId: getComponentWorkflowRun
      summary: Get component workflow run
      description: Returns details of a specific workflow run.
      tags: [ComponentWorkflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/WorkflowRunNameParam'
      responses:
        '200':
          description: Workflow run details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponentWorkflowRun'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteComponentWorkflowRun
      summary: Delete component workflow run
      description: Deletes a component workflow run.
      tags: [ComponentWorkflows]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/WorkflowRunNameParam'
      responses:
        '204':
          description: Component workflow run deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # Authorization Endpoints
  # =============================================================================
  /api/v1/authz/actions:
    get:
      operationId: listActions
      summary: List actions
      description: Returns all defined authorization actions.
      tags: [Authorization]
      responses:
        '200':
          description: List of actions
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/authz/evaluate:
    post:
      operationId: evaluate
      summary: Evaluate authorization
      description: Evaluates a single authorization request.
      tags: [Authorization]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluateRequest'
      responses:
        '200':
          description: Authorization decision
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Decision'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/authz/batch-evaluate:
    post:
      operationId: batchEvaluate
      summary: Batch evaluate authorization
      description: Evaluates multiple authorization requests in a single call.
      tags: [Authorization]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BatchEvaluateRequest'
      responses:
        '200':
          description: Authorization decisions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BatchEvaluateResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/authz/profile:
    get:
      operationId: getSubjectProfile
      summary: Get subject profile
      description: Returns the authorization profile for the authenticated subject.
      tags: [Authorization]
      parameters:
        - name: namespace
          in: query
          required: false
          description: Namespace scope
          schema:
            type: string
        - name: project
          in: query
          required: false
          description: Project scope
          schema:
            type: string
        - name: component
          in: query
          required: false
          description: Component scope
          schema:
            type: string
      responses:
        '200':
          description: Subject profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserCapabilitiesResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/clusterroles:
    get:
      operationId: listClusterRoles
      summary: List cluster roles
      description: Returns all cluster-scoped authorization roles.
      tags: [Authorization]
      responses:
        '200':
          description: List of cluster roles
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Role'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createClusterRole
      summary: Create cluster role
      description: Creates a new cluster-scoped authorization role.
      tags: [Authorization]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateClusterRoleRequest'
      responses:
        '201':
          description: Cluster role created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/clusterroles/{name}:
    get:
      operationId: getClusterRole
      summary: Get cluster role
      description: Returns details of a specific cluster role.
      tags: [Authorization]
      parameters:
        - name: name
          in: path
          required: true
          description: Cluster role name
          schema:
            type: string
            example: cluster-admin
      responses:
        '200':
          description: Cluster role details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateClusterRole
      summary: Update cluster role
      description: Updates an existing cluster role's actions and description.
      tags: [Authorization]
      parameters:
        - name: name
          in: path
          required: true
          description: Cluster role name
          schema:
            type: string
            example: cluster-admin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateClusterRoleRequest'
      responses:
        '200':
          description: Cluster role updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteClusterRole
      summary: Delete cluster role
      description: Deletes a cluster role.
      tags: [Authorization]
      parameters:
        - name: name
          in: path
          required: true
          description: Cluster role name
          schema:
            type: string
            example: cluster-admin
      responses:
        '204':
          description: Cluster role deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/clusterrolebindings:
    get:
      operationId: listClusterRoleBindings
      summary: List cluster role bindings
      description: Returns all cluster-scoped role bindings. Supports filtering by role name and/or entitlement.
      tags: [Authorization]
      parameters:
        - name: roleName
          in: query
          required: false
          description: Filter by role name
          schema:
            type: string
            example: admin
        - name: claim
          in: query
          required: false
          description: Filter by entitlement claim (must be used with value parameter)
          schema:
            type: string
            example: group
        - name: value
          in: query
          required: false
          description: Filter by entitlement value (must be used with claim parameter)
          schema:
            type: string
            example: admins
        - name: effect
          in: query
          required: false
          description: filter by binding effect (allow or deny)
          schema:
            type: string
            enum: [allow, deny]
      responses:
        '200':
          description: List of cluster role bindings
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RoleEntitlementMapping'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createClusterRoleBinding
      summary: Create cluster role binding
      description: Creates a new cluster-scoped role binding.
      tags: [Authorization]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateClusterRoleBindingRequest'
      responses:
        '201':
          description: Cluster role binding created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleEntitlementMapping'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/clusterrolebindings/{name}:
    get:
      operationId: getClusterRoleBinding
      summary: Get cluster role binding
      description: Returns details of a specific cluster role binding.
      tags: [Authorization]
      parameters:
        - name: name
          in: path
          required: true
          description: Cluster role binding name
          schema:
            type: string
            example: admin-binding
      responses:
        '200':
          description: Cluster role binding details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleEntitlementMapping'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateClusterRoleBinding
      summary: Update cluster role binding
      description: Updates an existing cluster role binding.
      tags: [Authorization]
      parameters:
        - name: name
          in: path
          required: true
          description: Cluster role binding name
          schema:
            type: string
            example: admin-binding
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateClusterRoleBindingRequest'
      responses:
        '200':
          description: Cluster role binding updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleEntitlementMapping'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteClusterRoleBinding
      summary: Delete cluster role binding
      description: Deletes a cluster role binding.
      tags: [Authorization]
      parameters:
        - name: name
          in: path
          required: true
          description: Cluster role binding name
          schema:
            type: string
            example: admin-binding
      responses:
        '204':
          description: Cluster role binding deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/roles:
    get:
      operationId: listNamespaceRoles
      summary: List namespace roles
      description: Returns all namespace-scoped authorization roles.
      tags: [Authorization]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      responses:
        '200':
          description: List of namespace roles
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Role'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createNamespaceRole
      summary: Create namespace role
      description: Creates a new namespace-scoped authorization role.
      tags: [Authorization]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNamespaceRoleRequest'
      responses:
        '201':
          description: Namespace role created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/roles/{name}:
    get:
      operationId: getNamespaceRole
      summary: Get namespace role
      description: Returns details of a specific namespace role.
      tags: [Authorization]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: name
          in: path
          required: true
          description: Namespace role name
          schema:
            type: string
            example: developer
      responses:
        '200':
          description: Namespace role details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateNamespaceRole
      summary: Update namespace role
      description: Updates an existing namespace role's actions and description.
      tags: [Authorization]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: name
          in: path
          required: true
          description: Namespace role name
          schema:
            type: string
            example: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateNamespaceRoleRequest'
      responses:
        '200':
          description: Namespace role updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteNamespaceRole
      summary: Delete namespace role
      description: Deletes a namespace role.
      tags: [Authorization]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: name
          in: path
          required: true
          description: Namespace role name
          schema:
            type: string
            example: developer
      responses:
        '204':
          description: Namespace role deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/rolebindings:
    get:
      operationId: listNamespaceRoleBindings
      summary: List namespace role bindings
      description: Returns all namespace-scoped role bindings. Supports filtering by role reference and/or entitlement.
      tags: [Authorization]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: roleName
          in: query
          required: false
          description: Filter by role reference name
          schema:
            type: string
            example: developer
        - name: roleNamespace
          in: query
          required: false
          description: Filter by role reference namespace (optional, for namespace-scoped roles)
          schema:
            type: string
            example: acme
        - name: claim
          in: query
          required: false
          description: Filter by entitlement claim (must be used with value parameter)
          schema:
            type: string
            example: group
        - name: value
          in: query
          required: false
          description: Filter by entitlement value (must be used with claim parameter)
          schema:
            type: string
            example: developers
        - name: effect
          in: query
          required: false
          description: filter by binding effect (allow or deny)
          schema:
            type: string
            enum: [allow, deny]
      responses:
        '200':
          description: List of namespace role bindings
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RoleEntitlementMapping'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createNamespaceRoleBinding
      summary: Create namespace role binding
      description: Creates a new namespace-scoped role binding.
      tags: [Authorization]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNamespaceRoleBindingRequest'
      responses:
        '201':
          description: Namespace role binding created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleEntitlementMapping'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/rolebindings/{name}:
    get:
      operationId: getNamespaceRoleBinding
      summary: Get namespace role binding
      description: Returns details of a specific namespace role binding.
      tags: [Authorization]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: name
          in: path
          required: true
          description: Namespace role binding name
          schema:
            type: string
            example: developer-binding
      responses:
        '200':
          description: Namespace role binding details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleEntitlementMapping'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateNamespaceRoleBinding
      summary: Update namespace role binding
      description: Updates an existing namespace role binding.
      tags: [Authorization]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: name
          in: path
          required: true
          description: Namespace role binding name
          schema:
            type: string
            example: developer-binding
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateNamespaceRoleBindingRequest'
      responses:
        '200':
          description: Namespace role binding updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleEntitlementMapping'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteNamespaceRoleBinding
      summary: Delete namespace role binding
      description: Deletes a namespace role binding.
      tags: [Authorization]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: name
          in: path
          required: true
          description: Namespace role binding name
          schema:
            type: string
            example: developer-binding
      responses:
        '204':
          description: Namespace role binding deleted successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # User Types Endpoint
  # =============================================================================

  /api/v1/user-types:
    get:
      operationId: listUserTypes
      summary: List user types
      description: Returns the configured user types for authentication and authorization.
      tags: [Authorization]
      responses:
        '200':
          description: List of configured user types
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserTypeConfig'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # Webhook Endpoints
  # =============================================================================

  /api/v1/webhooks/github:
    post:
      operationId: handleGitHubWebhook
      summary: Handle GitHub webhook
      description: Processes incoming GitHub webhook events to trigger builds.
      tags: [Webhooks]
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: GitHub webhook payload
              additionalProperties: true
      responses:
        '200':
          description: Webhook processed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebhookEventResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/webhooks/gitlab:
    post:
      operationId: handleGitLabWebhook
      summary: Handle GitLab webhook
      description: Processes incoming GitLab webhook events to trigger builds.
      tags: [Webhooks]
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: GitLab webhook payload
              additionalProperties: true
      responses:
        '200':
          description: Webhook processed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebhookEventResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/webhooks/bitbucket:
    post:
      operationId: handleBitbucketWebhook
      summary: Handle Bitbucket webhook
      description: Processes incoming Bitbucket webhook events to trigger builds.
      tags: [Webhooks]
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: Bitbucket webhook payload
              additionalProperties: true
      responses:
        '200':
          description: Webhook processed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebhookEventResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # Secret Reference Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/secret-references:
    get:
      operationId: listSecretReferences
      summary: List secret references
      description: Returns a list of secret references within a namespace.
      tags: [SecretReferences]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      responses:
        '200':
          description: List of secret references
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SecretReferenceList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createSecretReference
      summary: Create secret reference
      description: Creates a new secret reference within a namespace.
      tags: [SecretReferences]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SecretReference'
      responses:
        '201':
          description: SecretReference created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SecretReference'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/secret-references/{secretRefName}:
    get:
      operationId: getSecretReference
      summary: Get secret reference
      description: Returns details of a specific secret reference.
      tags: [SecretReferences]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: secretRefName
          in: path
          required: true
          description: SecretReference name
          schema:
            type: string
            example: my-secret-ref
      responses:
        '200':
          description: SecretReference details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SecretReference'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateSecretReference
      summary: Update secret reference
      description: Replaces an existing secret reference (full update).
      tags: [SecretReferences]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: secretRefName
          in: path
          required: true
          description: SecretReference name
          schema:
            type: string
            example: my-secret-ref
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SecretReference'
      responses:
        '200':
          description: SecretReference updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SecretReference'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteSecretReference
      summary: Delete secret reference
      description: Deletes a secret reference by name.
      tags: [SecretReferences]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: secretRefName
          in: path
          required: true
          description: SecretReference name
          schema:
            type: string
            example: my-secret-ref
      responses:
        '204':
          description: SecretReference deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # Workload Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/workloads:
    get:
      operationId: listWorkloads
      summary: List workloads
      description: Returns workload definitions in a namespace, optionally filtered by project or component.
      tags: [Workloads]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ProjectQueryParam'
        - $ref: '#/components/parameters/ComponentQueryParam'
      responses:
        '200':
          description: List of workloads
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkloadList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createWorkload
      summary: Create workload
      description: Creates a new workload definition in a namespace.
      tags: [Workloads]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Workload'
      responses:
        '201':
          description: Workload created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workload'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/workloads/{workloadName}:
    get:
      operationId: getWorkload
      summary: Get workload
      description: Returns details of a specific workload.
      tags: [Workloads]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: workloadName
          in: path
          required: true
          description: Workload name
          schema:
            type: string
            example: my-workload
      responses:
        '200':
          description: Workload details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workload'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateWorkload
      summary: Update workload
      description: Replaces an existing workload (full update).
      tags: [Workloads]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: workloadName
          in: path
          required: true
          description: Workload name
          schema:
            type: string
            example: my-workload
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Workload'
      responses:
        '200':
          description: Workload updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workload'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteWorkload
      summary: Delete workload
      description: Deletes a workload by name.
      tags: [Workloads]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: workloadName
          in: path
          required: true
          description: Workload name
          schema:
            type: string
            example: my-workload
      responses:
        '204':
          description: Workload deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # =============================================================================
  # Deployment Pipeline Endpoints
  # =============================================================================

  /api/v1/namespaces/{namespaceName}/deployment-pipelines:
    get:
      operationId: listDeploymentPipelines
      summary: List deployment pipelines
      description: Returns deployment pipelines in a namespace, optionally filtered by project.
      tags: [DeploymentPipelines]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - $ref: '#/components/parameters/ProjectQueryParam'
      responses:
        '200':
          description: List of deployment pipelines
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentPipelineList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    post:
      operationId: createDeploymentPipeline
      summary: Create deployment pipeline
      description: Creates a new deployment pipeline in a namespace.
      tags: [DeploymentPipelines]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeploymentPipeline'
      responses:
        '201':
          description: DeploymentPipeline created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentPipeline'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

  /api/v1/namespaces/{namespaceName}/deployment-pipelines/{pipelineName}:
    get:
      operationId: getDeploymentPipeline
      summary: Get deployment pipeline
      description: Returns details of a specific deployment pipeline.
      tags: [DeploymentPipelines]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: pipelineName
          in: path
          required: true
          description: DeploymentPipeline name
          schema:
            type: string
            example: default-pipeline
      responses:
        '200':
          description: DeploymentPipeline details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentPipeline'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    put:
      operationId: updateDeploymentPipeline
      summary: Update deployment pipeline
      description: Replaces an existing deployment pipeline (full update).
      tags: [DeploymentPipelines]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: pipelineName
          in: path
          required: true
          description: DeploymentPipeline name
          schema:
            type: string
            example: default-pipeline
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeploymentPipeline'
      responses:
        '200':
          description: DeploymentPipeline updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentPipeline'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      operationId: deleteDeploymentPipeline
      summary: Delete deployment pipeline
      description: Deletes a deployment pipeline by name.
      tags: [DeploymentPipelines]
      parameters:
        - $ref: '#/components/parameters/NamespaceNameParam'
        - name: pipelineName
          in: path
          required: true
          description: DeploymentPipeline name
          schema:
            type: string
            example: default-pipeline
      responses:
        '204':
          description: DeploymentPipeline deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

components:
  # ===========================================================================
  # Security Schemes
  # ===========================================================================
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWT Bearer token authentication.

        Obtain a token from your identity provider and include it in the
        Authorization header: `Authorization: Bearer <token>`

        The server validates tokens using JWKS from the configured issuer.

  # ===========================================================================
  # Common Parameters
  # ===========================================================================
  parameters:
    NamespaceNameParam:
      name: namespaceName
      in: path
      required: true
      description: Namespace name
      schema:
        type: string
        example: my-namespace

    ProjectNameParam:
      name: projectName
      in: path
      required: true
      description: Project name
      schema:
        type: string
        example: my-project

    EnvironmentNameParam:
      name: envName
      in: path
      required: true
      description: Environment name
      schema:
        type: string
        example: dev

    ComponentEnvironmentNameParam:
      name: environmentName
      in: path
      required: true
      description: Environment name for component-scoped operations
      schema:
        type: string
        example: dev

    DataPlaneNameParam:
      name: dpName
      in: path
      required: true
      description: DataPlane name
      schema:
        type: string
        example: default-dataplane

    ClusterDataPlaneNameParam:
      name: cdpName
      in: path
      required: true
      description: ClusterDataPlane name
      schema:
        type: string
        example: shared-dataplane

    ComponentTypeNameParam:
      name: ctName
      in: path
      required: true
      description: ComponentType name
      schema:
        type: string
        example: go-service

    TraitNameParam:
      name: traitName
      in: path
      required: true
      description: Trait name
      schema:
        type: string
        example: autoscaler

    WorkflowNameParam:
      name: workflowName
      in: path
      required: true
      description: Workflow name
      schema:
        type: string
        example: database-migration

    ComponentWorkflowNameParam:
      name: cwName
      in: path
      required: true
      description: ComponentWorkflow name
      schema:
        type: string
        example: docker-build

    ComponentNameParam:
      name: componentName
      in: path
      required: true
      description: Component name
      schema:
        type: string
        example: api-service

    WorkflowRunNameParam:
      name: runName
      in: path
      required: true
      description: Workflow run name
      schema:
        type: string
        example: api-service-run-1234

    BindingNameParam:
      name: bindingName
      in: path
      required: true
      description: Binding name
      schema:
        type: string
        example: api-service-dev

    ReleaseNameParam:
      name: releaseName
      in: path
      required: true
      description: Release name
      schema:
        type: string
        example: v1.0.0

    RoleNameParam:
      name: roleName
      in: path
      required: true
      description: Role name
      schema:
        type: string
        example: admin

    MappingIdParam:
      name: mappingId
      in: path
      required: true
      description: Role mapping ID
      schema:
        type: integer
        format: int64
        example: 123

    LimitParam:
      name: limit
      in: query
      required: false
      description: Maximum number of items to return per page
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20

    CursorParam:
      name: cursor
      in: query
      required: false
      description: |
        Opaque pagination cursor from a previous response.
        Pass the `nextCursor` value from pagination metadata to fetch the next page.
      schema:
        type: string

    ProjectQueryParam:
      name: project
      in: query
      required: false
      description: Filter by project name
      schema:
        type: string
        example: my-project

    ComponentQueryParam:
      name: component
      in: query
      required: false
      description: Filter by component name
      schema:
        type: string
        example: api-service

    EnvironmentQueryParam:
      name: environment
      in: query
      required: false
      description: Filter by environment name
      schema:
        type: string
        example: dev

  # ===========================================================================
  # Common Responses
  # ===========================================================================
  responses:
    BadRequest:
      description: Invalid request parameters
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: 'Invalid request: name is required'
            code: BAD_REQUEST
            details:
              - field: name
                message: is required

    Unauthorized:
      description: Authentication required or token invalid
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: 'Authentication required'
            code: UNAUTHORIZED

    Forbidden:
      description: Insufficient permissions to access the resource
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: 'You do not have permission to access this resource'
            code: FORBIDDEN

    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "Project 'my-project' not found"
            code: NOT_FOUND

    Conflict:
      description: Resource already exists
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "Project 'my-project' already exists"
            code: CONFLICT

    InternalError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: 'Internal server error'
            code: INTERNAL_ERROR

  # ===========================================================================
  # Schemas
  # ===========================================================================
  schemas:
    # -------------------------------------------------------------------------
    # Error Response
    # -------------------------------------------------------------------------
    ErrorResponse:
      type: object
      description: Standard error response format
      required:
        - error
        - code
      properties:
        error:
          type: string
          description: Human-readable error message
          example: "Project 'my-project' not found"
        code:
          type: string
          description: Machine-readable error code
          enum:
            - BAD_REQUEST
            - UNAUTHORIZED
            - FORBIDDEN
            - NOT_FOUND
            - CONFLICT
            - INTERNAL_ERROR
          example: NOT_FOUND
        details:
          type: array
          description: Additional error details (e.g., validation errors)
          items:
            type: object
            properties:
              field:
                type: string
                description: Field that caused the error
                example: name
              message:
                type: string
                description: Error message for this field
                example: must be at least 1 character

    # -------------------------------------------------------------------------
    # Shared Kubernetes-style Types
    # -------------------------------------------------------------------------
    ObjectMeta:
      type: object
      description: |
        Standard Kubernetes object metadata (without kind/apiVersion).
        Matches the structure of metav1.ObjectMeta for the fields exposed via the API.
      properties:
        name:
          type: string
          description: Name of the resource (unique within namespace)
          example: my-project
        namespace:
          type: string
          description: Kubernetes namespace
          example: my-namespace
        uid:
          type: string
          description: Unique identifier (Kubernetes UID)
          example: 550e8400-e29b-41d4-a716-446655440000
        labels:
          type: object
          description: Map of string keys and values for organizing resources
          additionalProperties:
            type: string
        annotations:
          type: object
          description: Map of string keys and values for storing auxiliary data
          additionalProperties:
            type: string
        creationTimestamp:
          type: string
          format: date-time
          description: Creation timestamp
          example: '2025-01-06T10:00:00Z'

    Condition:
      type: object
      description: Kubernetes-style condition
      required:
        - type
        - status
        - lastTransitionTime
        - reason
      properties:
        type:
          type: string
          description: Type of condition (e.g., Ready)
          example: Ready
        status:
          type: string
          description: Status of the condition
          enum: ['True', 'False', 'Unknown']
          example: 'True'
        observedGeneration:
          type: integer
          format: int64
          description: Generation observed when this condition was set
        lastTransitionTime:
          type: string
          format: date-time
          description: Last time the condition transitioned
          example: '2025-01-06T10:00:05Z'
        reason:
          type: string
          description: Machine-readable reason for the condition
          example: Reconciled
        message:
          type: string
          description: Human-readable message
          example: 'Project is ready'

    DataPlaneRef:
      type: object
      description: Reference to a DataPlane or ClusterDataPlane
      required:
        - kind
        - name
      properties:
        kind:
          type: string
          description: Kind of data plane (DataPlane or ClusterDataPlane)
          enum: [DataPlane, ClusterDataPlane]
          example: DataPlane
        name:
          type: string
          description: Name of the data plane resource
          example: default

    AgentConnectionStatus:
      type: object
      description: Status of the cluster agent connection
      properties:
        connected:
          type: boolean
          description: Whether the cluster agent is currently connected
          example: true
        connectedAgents:
          type: integer
          description: Number of connected agent instances
          example: 1
        lastConnectedTime:
          type: string
          format: date-time
          description: Timestamp of last successful agent connection
          example: '2025-01-06T10:00:00Z'

    GatewaySpec:
      type: object
      description: Gateway configuration for a plane
      properties:
        publicVirtualHost:
          type: string
          description: Public virtual host for external traffic
          example: apps.example.com
        organizationVirtualHost:
          type: string
          description: Organization virtual host for internal traffic
          example: internal.example.com
        publicHTTPPort:
          type: integer
          format: int32
          description: Public HTTP port
          example: 80
        publicHTTPSPort:
          type: integer
          format: int32
          description: Public HTTPS port
          example: 443

    ClusterAgentConfig:
      type: object
      description: Configuration for the cluster agent
      properties:
        clientCA:
          type: string
          description: CA certificate for cluster agent client authentication (PEM format)
          example: "-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----"

    # -------------------------------------------------------------------------
    # Version
    # -------------------------------------------------------------------------
    VersionResponse:
      type: object
      description: Server version information
      required:
        - name
        - version
        - gitRevision
        - buildTime
        - goOS
        - goArch
        - goVersion
      properties:
        name:
          type: string
          description: Application name
          example: openchoreo-api
        version:
          type: string
          description: Version string
          example: v0.1.0
        gitRevision:
          type: string
          description: Git commit SHA
          example: abc1234
        buildTime:
          type: string
          description: Build timestamp
          example: '2025-01-06T10:00:00Z'
        goOS:
          type: string
          description: Target operating system
          example: linux
        goArch:
          type: string
          description: Target architecture
          example: amd64
        goVersion:
          type: string
          description: Go version used to build
          example: go1.24.2

    # -------------------------------------------------------------------------
    # OAuth Protected Resource Metadata
    # -------------------------------------------------------------------------
    OAuthProtectedResourceMetadata:
      type: object
      description: OAuth 2.0 protected resource metadata as defined in RFC 9728
      required:
        - resource_name
        - resource
        - authorization_servers
        - bearer_methods_supported
        - scopes_supported
      properties:
        resource_name:
          type: string
          description: Human-readable name of the protected resource
          example: OpenChoreo MCP Server
        resource:
          type: string
          description: URL of the protected resource
          example: https://api.openchoreo.dev/mcp
        authorization_servers:
          type: array
          description: List of authorization server URLs
          items:
            type: string
          example:
            - https://auth.openchoreo.dev
        bearer_methods_supported:
          type: array
          description: Supported bearer token methods
          items:
            type: string
          example:
            - header
        scopes_supported:
          type: array
          description: Supported OAuth scopes
          items:
            type: string

    # -------------------------------------------------------------------------
    # Client Configuration
    # -------------------------------------------------------------------------
    ExternalClient:
      type: object
      description: External client configuration
      required:
        - name
        - client_id
        - scopes
      properties:
        name:
          type: string
          description: Name of the external client
          example: cli
        client_id:
          type: string
          description: OAuth2 client ID for this client type
          example: openchoreo-cli
        scopes:
          type: array
          description: OAuth2 scopes for this client
          items:
            type: string
          example: ['openid', 'profile', 'email']

    ClientConfigList:
      type: object
      description: OpenID Connect configuration response
      required:
        - token_endpoint
        - authorization_endpoint
        - external_clients
        - security_enabled
      properties:
        issuer:
          type: string
          description: OIDC issuer URL
          example: https://auth.openchoreo.dev
        token_endpoint:
          type: string
          description: OAuth2 token endpoint URL
          example: https://auth.openchoreo.dev/oauth2/token
        authorization_endpoint:
          type: string
          description: OAuth2 authorization endpoint URL
          example: https://auth.openchoreo.dev/authorize
        security_enabled:
          type: boolean
          description: Whether authentication is enabled on the server
          example: true
        external_clients:
          type: array
          description: Array of external client configurations
          items:
            $ref: '#/components/schemas/ExternalClient'

    # -------------------------------------------------------------------------
    # User Type Configuration
    # -------------------------------------------------------------------------
    UserTypeConfig:
      type: object
      description: Configuration for a user type used in authentication and authorization
      required:
        - type
        - displayName
        - priority
        - authMechanisms
      properties:
        type:
          type: string
          description: User type identifier (e.g., "user", "service_account")
          example: user
        displayName:
          type: string
          description: Human-readable name for the user type
          example: Human User
        priority:
          type: integer
          description: Check order for user type detection (lower = higher priority)
          example: 1
        authMechanisms:
          type: array
          description: Supported authentication mechanisms for this user type
          items:
            $ref: '#/components/schemas/AuthMechanismConfig'

    AuthMechanismConfig:
      type: object
      description: Configuration for an authentication mechanism
      required:
        - type
        - entitlement
      properties:
        type:
          type: string
          description: Authentication mechanism type (e.g., "jwt", "oauth2", "api_key")
          example: jwt
        entitlement:
          $ref: '#/components/schemas/EntitlementConfig'

    EntitlementConfig:
      type: object
      description: Configuration for extracting entitlement claims from tokens
      required:
        - claim
        - displayName
      properties:
        claim:
          type: string
          description: Claim name for detection and entitlement (e.g., "groups", "scopes")
          example: groups
        displayName:
          type: string
          description: Human-readable name for the claim
          example: Groups

    # -------------------------------------------------------------------------
    # Pagination
    # -------------------------------------------------------------------------
    Pagination:
      type: object
      description: |
        Cursor-based pagination metadata. Uses Kubernetes-native continuation tokens
        for efficient pagination through large result sets.
      properties:
        nextCursor:
          type: string
          description: |
            Opaque cursor for fetching the next page. Pass this value as the
            `cursor` query parameter in the next request. Absent when there
            are no more items.
          example: 'eyJ2IjoibWV0YS5rOHMuaW8vdjEiLCJydiI6MzQ0N30='
        remainingCount:
          type: integer
          format: int64
          description: |
            Approximate number of items remaining after this page.
            This is an estimate provided by Kubernetes and may not be exact.
            Use for UI hints like "~50 more items". May be absent for
            filtered queries.
          example: 42

    # -------------------------------------------------------------------------
    # Namespaces
    # -------------------------------------------------------------------------
    NamespaceList:
      type: object
      description: Paginated list of namespaces
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Namespace'
        pagination:
          $ref: '#/components/schemas/Pagination'

    Namespace:
      type: object
      description: |
        Namespace resource representing an OpenChoreo control plane namespace.
        Control plane namespaces hold resources like Projects, Components, and Environments.
        These namespaces are identified by the label `openchoreo.dev/controlplane-namespace=true`.
      required:
        - name
        - createdAt
      properties:
        name:
          type: string
          description: Namespace name (unique identifier)
          example: my-namespace
        displayName:
          type: string
          description: Human-readable display name
          example: My Namespace
        description:
          type: string
          description: Namespace description
          example: Main development namespace
        namespace:
          type: string
          description: Kubernetes namespace for the namespace
          example: my-namespace
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
          example: '2025-01-06T10:00:00Z'
        status:
          type: string
          description: Namespace status
          example: Ready

    # -------------------------------------------------------------------------
    # Projects
    # -------------------------------------------------------------------------
    BuildPlaneRef:
      type: object
      description: Reference to a BuildPlane or ClusterBuildPlane
      required:
        - kind
        - name
      properties:
        kind:
          type: string
          description: Kind of build plane
          enum: [BuildPlane, ClusterBuildPlane]
          example: BuildPlane
        name:
          type: string
          description: Name of the build plane resource
          example: default

    ProjectSpec:
      type: object
      description: Desired state of a Project
      properties:
        deploymentPipelineRef:
          type: string
          description: |
            Reference to the DeploymentPipeline that defines the environments
            and deployment progression for components in this project.
          example: default
        buildPlaneRef:
          $ref: '#/components/schemas/BuildPlaneRef'

    ProjectStatus:
      type: object
      description: Observed state of a Project
      properties:
        observedGeneration:
          type: integer
          format: int64
          description: Generation of the most recently observed Project
        conditions:
          type: array
          description: Current state conditions of the Project
          items:
            $ref: '#/components/schemas/Condition'

    Project:
      type: object
      description: |
        Project resource (Kubernetes object without kind/apiVersion).
        Projects group components within a namespace and reference a deployment pipeline.
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          $ref: '#/components/schemas/ProjectSpec'
        status:
          $ref: '#/components/schemas/ProjectStatus'

    ProjectList:
      type: object
      description: Paginated list of projects
      required:
        - items
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Project'
        pagination:
          $ref: '#/components/schemas/Pagination'

    # -------------------------------------------------------------------------
    # Components
    # -------------------------------------------------------------------------
    ComponentList:
      type: object
      description: Paginated list of components
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Component'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ComponentOwner:
      type: object
      description: Ownership information for a Component
      required:
        - projectName
      properties:
        projectName:
          type: string
          description: Name of the owning Project
          example: my-project

    ComponentWorkflowRunConfig:
      type: object
      description: Workflow configuration for a Component (references a ComponentWorkflow CR)
      required:
        - name
        - systemParameters
      properties:
        name:
          type: string
          description: Name of the ComponentWorkflow CR to use
          example: docker-build
        systemParameters:
          $ref: '#/components/schemas/SystemParametersValues'
        parameters:
          type: object
          description: User-defined workflow parameters
          additionalProperties: true

    SystemParametersValues:
      type: object
      description: System parameters containing repository information
      required:
        - repository
      properties:
        repository:
          type: object
          required:
            - url
            - revision
            - appPath
          properties:
            url:
              type: string
              description: Git repository URL
              example: https://github.com/org/repo.git
            revision:
              type: object
              required:
                - branch
              properties:
                branch:
                  type: string
                  description: Git branch to build from
                  example: main
                commit:
                  type: string
                  description: Specific commit SHA (optional)
                  example: abc1234def5678
            appPath:
              type: string
              description: Path to application within repository
              example: ./services/api

    ComponentLatestRelease:
      type: object
      description: Information about the latest ComponentRelease for a Component
      required:
        - name
        - releaseHash
      properties:
        name:
          type: string
          description: Name of the ComponentRelease resource
          example: api-service-abc123
        releaseHash:
          type: string
          description: Hash of the ComponentRelease spec
          example: sha256:abc123

    Component:
      type: object
      description: |
        Component resource (Kubernetes object without kind/apiVersion).
        Components group source code and deployment configuration within a Project.
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the Component
          required:
            - owner
          properties:
            owner:
              $ref: '#/components/schemas/ComponentOwner'
            type:
              type: string
              description: 'LEGACY: Component type (e.g., Service, WebApplication). Use componentType for new components.'
              example: Service
              deprecated: true
            componentType:
              type: string
              description: 'Component type reference in format: {workloadType}/{componentTypeName}'
              example: deployment/go-service
            autoDeploy:
              type: boolean
              description: Whether to automatically deploy to default environment when created
              default: false
              example: true
            autoBuild:
              type: boolean
              description: Whether to automatically trigger builds on code push
              example: false
            parameters:
              type: object
              description: ComponentType parameters (schema defined by the referenced ComponentType)
              additionalProperties: true
            traits:
              type: array
              description: Trait instances to compose into this component
              items:
                $ref: '#/components/schemas/ComponentTrait'
            workflow:
              $ref: '#/components/schemas/ComponentWorkflowRunConfig'
        status:
          type: object
          description: Observed state of the Component
          properties:
            observedGeneration:
              type: integer
              format: int64
              description: Generation most recently observed by the controller
            conditions:
              type: array
              description: Current state conditions
              items:
                $ref: '#/components/schemas/Condition'
            latestRelease:
              $ref: '#/components/schemas/ComponentLatestRelease'

    ComponentWorkflowConfig:
      type: object
      description: Component workflow configuration (legacy schema, prefer ComponentWorkflowRunConfig)
      properties:
        name:
          type: string
          description: Workflow name
          example: docker-build
        systemParameters:
          $ref: '#/components/schemas/SystemParametersValues'
        parameters:
          type: object
          description: User-defined workflow parameters
          additionalProperties: true

    # -------------------------------------------------------------------------
    # Environments
    # -------------------------------------------------------------------------
    EnvironmentList:
      type: object
      description: Paginated list of environments
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Environment'
        pagination:
          $ref: '#/components/schemas/Pagination'

    Environment:
      type: object
      description: Environment resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the Environment
          properties:
            dataPlaneRef:
              $ref: '#/components/schemas/DataPlaneRef'
            isProduction:
              type: boolean
              description: Whether this is a production environment
              example: false
            gateway:
              $ref: '#/components/schemas/GatewaySpec'
        status:
          type: object
          description: Observed state of the Environment
          properties:
            observedGeneration:
              type: integer
              format: int64
              description: Generation most recently observed by the controller
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'

    ObserverURLResponse:
      type: object
      description: Observer URL response for accessing logs and metrics
      properties:
        observerUrl:
          type: string
          description: URL to the observer service for logs and metrics
          example: https://observer.example.com/api/v1
        message:
          type: string
          description: Additional information or status message
          example: Observer URL is available

    RCAAgentURLResponse:
      type: object
      description: RCA agent URL response for AI-powered root cause analysis
      properties:
        rcaAgentUrl:
          type: string
          description: URL to the RCA agent service for AI-powered root cause analysis
          example: https://rca-agent.example.com
        message:
          type: string
          description: Additional information or status message
          example: RCA agent URL is available

    # -------------------------------------------------------------------------
    # DataPlanes
    # -------------------------------------------------------------------------
    DataPlaneList:
      type: object
      description: Paginated list of data planes
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/DataPlane'
        pagination:
          $ref: '#/components/schemas/Pagination'

    DataPlane:
      type: object
      description: DataPlane resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the DataPlane
          required:
            - clusterAgent
            - gateway
          properties:
            planeID:
              type: string
              description: Logical plane identifier for the physical cluster
              example: prod-cluster
            clusterAgent:
              $ref: '#/components/schemas/ClusterAgentConfig'
            gateway:
              $ref: '#/components/schemas/GatewaySpec'
            imagePullSecretRefs:
              type: array
              description: References to SecretReference resources for image pull secrets
              items:
                type: string
              example: ['docker-registry-secret']
            secretStoreRef:
              type: object
              description: Reference to an ESO ClusterSecretStore
              properties:
                name:
                  type: string
                  example: vault-secret-store
            observabilityPlaneRef:
              $ref: '#/components/schemas/ObservabilityPlaneRef'
        status:
          type: object
          description: Observed state of the DataPlane
          properties:
            observedGeneration:
              type: integer
              format: int64
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'
            agentConnection:
              $ref: '#/components/schemas/AgentConnectionStatus'

    # -------------------------------------------------------------------------
    # BuildPlanes
    # -------------------------------------------------------------------------
    BuildPlaneList:
      type: object
      description: Paginated list of build planes
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/BuildPlane'
        pagination:
          $ref: '#/components/schemas/Pagination'

    BuildPlane:
      type: object
      description: BuildPlane resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the BuildPlane
          required:
            - clusterAgent
          properties:
            planeID:
              type: string
              description: Logical plane identifier for the physical cluster
              example: ci-cluster
            clusterAgent:
              $ref: '#/components/schemas/ClusterAgentConfig'
            secretStoreRef:
              type: object
              description: Reference to an ESO ClusterSecretStore
              properties:
                name:
                  type: string
                  example: vault-secret-store
            observabilityPlaneRef:
              $ref: '#/components/schemas/ObservabilityPlaneRef'
        status:
          type: object
          description: Observed state of the BuildPlane
          properties:
            observedGeneration:
              type: integer
              format: int64
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'
            agentConnection:
              $ref: '#/components/schemas/AgentConnectionStatus'

    # -------------------------------------------------------------------------
    # ObservabilityPlaneRef
    # -------------------------------------------------------------------------
    ObservabilityPlaneRef:
      type: object
      description: Reference to an ObservabilityPlane or ClusterObservabilityPlane
      required:
        - kind
        - name
      properties:
        kind:
          type: string
          description: Kind of observability plane (ObservabilityPlane or ClusterObservabilityPlane)
          enum: [ObservabilityPlane, ClusterObservabilityPlane]
          example: ObservabilityPlane
        name:
          type: string
          description: Name of the observability plane resource. Must be a valid DNS-1123 label.
          minLength: 1
          maxLength: 63
          pattern: '^[a-z0-9]([-a-z0-9]*[a-z0-9])?$'
          example: default

    # -------------------------------------------------------------------------
    # ObservabilityPlanes
    # -------------------------------------------------------------------------
    ObservabilityPlaneList:
      type: object
      description: Paginated list of observability planes
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ObservabilityPlane'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ObservabilityPlane:
      type: object
      description: ObservabilityPlane resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the ObservabilityPlane
          required:
            - clusterAgent
            - observerURL
          properties:
            planeID:
              type: string
              description: Logical plane identifier for the physical cluster
              example: monitoring-cluster
            clusterAgent:
              $ref: '#/components/schemas/ClusterAgentConfig'
            observerURL:
              type: string
              description: Base URL of the Observer API
              example: http://observer.observability-plane.svc:8080
            rcaAgentURL:
              type: string
              description: Base URL of the RCA Agent API
              example: http://rca-agent.observability-plane.svc:8080
        status:
          type: object
          description: Observed state of the ObservabilityPlane
          properties:
            observedGeneration:
              type: integer
              format: int64
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'
            agentConnection:
              $ref: '#/components/schemas/AgentConnectionStatus'

    # -------------------------------------------------------------------------
    # ClusterDataPlanes (Cluster-Scoped)
    # -------------------------------------------------------------------------
    ClusterDataPlaneList:
      type: object
      description: Paginated list of cluster-scoped data planes
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ClusterDataPlane'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ClusterDataPlane:
      type: object
      description: Cluster-scoped DataPlane resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the ClusterDataPlane
          required:
            - planeID
            - clusterAgent
            - gateway
          properties:
            planeID:
              type: string
              description: Logical plane identifier for the physical cluster
              example: us-west-prod-cluster
            clusterAgent:
              $ref: '#/components/schemas/ClusterAgentConfig'
            gateway:
              $ref: '#/components/schemas/GatewaySpec'
            imagePullSecretRefs:
              type: array
              description: References to SecretReference resources for image pull secrets
              items:
                type: string
              example: ['docker-registry-secret']
            secretStoreRef:
              type: object
              description: Reference to an ESO ClusterSecretStore
              properties:
                name:
                  type: string
                  example: vault-secret-store
            observabilityPlaneRef:
              $ref: '#/components/schemas/ClusterObservabilityPlaneRef'
        status:
          type: object
          description: Observed state of the ClusterDataPlane
          properties:
            observedGeneration:
              type: integer
              format: int64
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'
            agentConnection:
              $ref: '#/components/schemas/AgentConnectionStatus'

    # -------------------------------------------------------------------------
    # ClusterBuildPlanes (Cluster-Scoped)
    # -------------------------------------------------------------------------
    ClusterBuildPlaneList:
      type: object
      description: List of cluster-scoped build planes
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ClusterBuildPlane'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ClusterBuildPlane:
      type: object
      description: Cluster-scoped BuildPlane resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the ClusterBuildPlane
          required:
            - planeID
            - clusterAgent
          properties:
            planeID:
              type: string
              description: Logical plane identifier for the physical cluster
              example: ci-cluster
            clusterAgent:
              $ref: '#/components/schemas/ClusterAgentConfig'
            secretStoreRef:
              type: object
              description: Reference to an ESO ClusterSecretStore
              properties:
                name:
                  type: string
                  example: vault-secret-store
            observabilityPlaneRef:
              $ref: '#/components/schemas/ClusterObservabilityPlaneRef'
        status:
          type: object
          description: Observed state of the ClusterBuildPlane
          properties:
            observedGeneration:
              type: integer
              format: int64
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'
            agentConnection:
              $ref: '#/components/schemas/AgentConnectionStatus'

    # -------------------------------------------------------------------------
    # ClusterObservabilityPlaneRef (Cluster-Scoped Only)
    # -------------------------------------------------------------------------
    ClusterObservabilityPlaneRef:
      type: object
      description: Reference to a ClusterObservabilityPlane (cluster-scoped only)
      required:
        - kind
        - name
      properties:
        kind:
          type: string
          description: Kind of observability plane (only ClusterObservabilityPlane allowed)
          enum: [ClusterObservabilityPlane]
          example: ClusterObservabilityPlane
        name:
          type: string
          description: Name of the ClusterObservabilityPlane resource
          minLength: 1
          maxLength: 63
          pattern: '^[a-z0-9]([-a-z0-9]*[a-z0-9])?$'
          example: default

    # -------------------------------------------------------------------------
    # ClusterObservabilityPlanes (Cluster-Scoped)
    # -------------------------------------------------------------------------
    ClusterObservabilityPlaneList:
      type: object
      description: List of cluster-scoped observability planes
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ClusterObservabilityPlane'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ClusterObservabilityPlane:
      type: object
      description: Cluster-scoped ObservabilityPlane resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the ClusterObservabilityPlane
          required:
            - planeID
            - clusterAgent
            - observerURL
          properties:
            planeID:
              type: string
              description: Logical plane identifier for the physical cluster
              example: monitoring-cluster
            clusterAgent:
              $ref: '#/components/schemas/ClusterAgentConfig'
            observerURL:
              type: string
              description: Base URL of the Observer API
              example: http://observer.observability-plane.svc:8080
            rcaAgentURL:
              type: string
              description: Base URL of the RCA Agent API
              example: http://rca-agent.observability-plane.svc:8080
        status:
          type: object
          description: Observed state of the ClusterObservabilityPlane
          properties:
            observedGeneration:
              type: integer
              format: int64
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'
            agentConnection:
              $ref: '#/components/schemas/AgentConnectionStatus'

    # -------------------------------------------------------------------------
    # ComponentTypes
    # -------------------------------------------------------------------------
    ComponentTypeList:
      type: object
      description: Paginated list of component types
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ComponentType'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ComponentType:
      type: object
      description: ComponentType resource (Kubernetes object without kind/apiVersion). Read-only  defined by platform engineers.
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the ComponentType
          required:
            - workloadType
          properties:
            workloadType:
              type: string
              description: Type of workload (deployment, statefulset, cronjob, job, proxy)
              enum: [deployment, statefulset, cronjob, job, proxy]
              example: deployment
            allowedWorkflows:
              type: array
              description: List of allowed ComponentWorkflow names for components of this type
              items:
                type: string
              example: ['docker-build', 'buildpack-build']
            schema:
              type: object
              description: Developer-facing parameter schema
              additionalProperties: true
            traits:
              type: array
              description: Pre-configured trait instances embedded in this ComponentType
              items:
                type: object
                additionalProperties: true
            allowedTraits:
              type: array
              description: List of allowed Trait names developers can attach
              items:
                type: string
              example: ['autoscaler', 'logger']
        status:
          type: object
          description: Observed state of the ComponentType
          properties:
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'

    # -------------------------------------------------------------------------
    # Traits
    # -------------------------------------------------------------------------
    TraitList:
      type: object
      description: Paginated list of traits
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Trait'
        pagination:
          $ref: '#/components/schemas/Pagination'

    Trait:
      type: object
      description: Trait resource (Kubernetes object without kind/apiVersion). Read-only  defined by platform engineers.
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the Trait
          properties:
            schema:
              type: object
              description: Trait parameter schema
              additionalProperties: true
            validations:
              type: array
              description: CEL-based validation rules
              items:
                type: object
                additionalProperties: true
            creates:
              type: array
              description: Kubernetes resources to create when trait is applied
              items:
                type: object
                additionalProperties: true
            patches:
              type: array
              description: Patches to apply to existing resources
              items:
                type: object
                additionalProperties: true
        status:
          type: object
          description: Observed state of the Trait
          properties:
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'

    # -------------------------------------------------------------------------
    # Schema Response
    # -------------------------------------------------------------------------
    SchemaResponse:
      type: object
      description: JSON Schema response for component types, traits, or workflows
      additionalProperties: true
      example:
        type: object
        properties:
          replicas:
            type: integer
            default: 1
          port:
            type: integer
            default: 8080

    # -------------------------------------------------------------------------
    # Workflows
    # -------------------------------------------------------------------------
    WorkflowList:
      type: object
      description: Paginated list of workflows
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Workflow'
        pagination:
          $ref: '#/components/schemas/Pagination'

    Workflow:
      type: object
      description: Workflow resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the Workflow
          properties:
            schema:
              type: object
              description: Developer-facing parameter schema for workflow runs
              additionalProperties: true
            runTemplate:
              type: object
              description: Kubernetes resource template to render and apply to the cluster
              additionalProperties: true
            resources:
              type: array
              description: Additional Kubernetes resources to create alongside the run template
              items:
                type: object
                additionalProperties: true
            ttlAfterCompletion:
              type: string
              description: Time-to-live for workflow runs after completion (e.g., "90d", "1h30m")
              example: '90d'
        status:
          type: object
          description: Observed state of the Workflow
          properties:
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'

    # -------------------------------------------------------------------------
    # WorkflowRuns
    # -------------------------------------------------------------------------
    WorkflowRunStatusResponse:
      type: object
      description: Status of a workflow run including per-step details
      required:
        - status
        - steps
        - hasLiveObservability
      properties:
        status:
          type: string
          enum: [Pending, Running, Succeeded, Failed, Error]
          description: Overall workflow run status
          example: Running
        steps:
          type: array
          description: Per-step status details
          items:
            $ref: '#/components/schemas/WorkflowStepStatus'
        hasLiveObservability:
          type: boolean
          description: Whether live logs/events are available from the build plane
          example: true

    WorkflowStepStatus:
      type: object
      description: Status of an individual workflow step
      required:
        - name
        - phase
      properties:
        name:
          type: string
          description: Step name
          example: clone-step
        phase:
          type: string
          description: Step phase
          enum: [Pending, Running, Succeeded, Failed, Skipped, Error]
          example: Succeeded
        startedAt:
          type: string
          format: date-time
          description: When the step started
          example: "2025-01-06T10:00:00Z"
        finishedAt:
          type: string
          format: date-time
          description: When the step finished
          example: "2025-01-06T10:01:00Z"

    WorkflowRunLogEntry:
      type: object
      description: A single log entry from a workflow run
      required:
        - log
      properties:
        timestamp:
          type: string
          format: date-time
          description: Log entry timestamp
          example: "2025-01-06T10:00:00Z"
        log:
          type: string
          description: Log message
          example: "Step 1: Cloning repository..."

    WorkflowRunEventEntry:
      type: object
      description: A single Kubernetes event entry from a workflow run
      required:
        - timestamp
        - type
        - reason
        - message
      properties:
        timestamp:
          type: string
          format: date-time
          description: Timestamp when the event was generated (RFC3339 format)
          example: '2025-01-06T10:00:00.123Z'
        type:
          type: string
          description: Event type
          example: 'Normal'
        reason:
          type: string
          description: Reason for the event
          example: 'Started'
        message:
          type: string
          description: Event message
          example: 'Started workflow step'

    WorkflowRunList:
      type: object
      description: Paginated list of workflow runs
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/WorkflowRun'
        pagination:
          $ref: '#/components/schemas/Pagination'

    WorkflowRun:
      type: object
      description: WorkflowRun resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the WorkflowRun
          required:
            - workflow
          properties:
            workflow:
              type: object
              description: Workflow configuration referencing the Workflow CR
              required:
                - name
              properties:
                name:
                  type: string
                  description: Name of the Workflow CR to execute
                  example: database-migration
                parameters:
                  type: object
                  description: Developer-provided workflow parameter values
                  additionalProperties: true
            ttlAfterCompletion:
              type: string
              description: Time-to-live after completion (e.g., "90d", "1h30m")
              example: '90d'
        status:
          type: object
          description: Observed state of the WorkflowRun
          properties:
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'
            tasks:
              type: array
              description: Workflow tasks with execution status
              items:
                $ref: '#/components/schemas/WorkflowTask'
            startedAt:
              type: string
              format: date-time
              description: Timestamp when execution started
            completedAt:
              type: string
              format: date-time
              description: Timestamp when execution completed

    WorkflowTask:
      type: object
      description: A single task/step in a workflow execution
      properties:
        name:
          type: string
          description: Task name
          example: clone
        phase:
          type: string
          description: Execution phase
          enum: [Pending, Running, Succeeded, Failed, Skipped, Error]
          example: Succeeded
        startedAt:
          type: string
          format: date-time
          description: Timestamp when task started
        completedAt:
          type: string
          format: date-time
          description: Timestamp when task completed
        message:
          type: string
          description: Additional details about task status
          example: 'Build failed: out of memory'

    # -------------------------------------------------------------------------
    # ComponentWorkflows
    # -------------------------------------------------------------------------
    ComponentWorkflowTemplateList:
      type: object
      description: Paginated list of component workflow templates
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ComponentWorkflowTemplate'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ComponentWorkflowTemplate:
      type: object
      description: Component workflow template resource
      required:
        - name
        - createdAt
      properties:
        name:
          type: string
          description: ComponentWorkflow name (unique within namespace)
          example: docker-build
        displayName:
          type: string
          description: Human-readable display name
          example: Docker Build
        description:
          type: string
          description: ComponentWorkflow description
          example: Builds container images using Docker
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
          example: '2025-01-06T10:00:00Z'

    UpdateComponentWorkflowRequest:
      type: object
      description: Request to update component workflow parameters
      properties:
        workflowName:
          type: string
          description: ComponentWorkflow template name to use
          example: docker-build
        systemParameters:
          type: object
          description: System parameters including repository configuration
          properties:
            repository:
              type: object
              properties:
                url:
                  type: string
                  description: Git repository URL
                  example: https://github.com/org/repo.git
                revision:
                  type: object
                  properties:
                    branch:
                      type: string
                      description: Git branch
                      example: main
                    commit:
                      type: string
                      description: Specific commit SHA
                      example: abc1234
                appPath:
                  type: string
                  description: Path to application within repository
                  example: ./services/api
        parameters:
          type: object
          description: User-defined workflow parameters
          additionalProperties: true

    ComponentWorkflowRunList:
      type: object
      description: Paginated list of component workflow runs
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ComponentWorkflowRun'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ComponentWorkflowRun:
      type: object
      description: ComponentWorkflowRun resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the ComponentWorkflowRun
          required:
            - owner
            - workflow
          properties:
            owner:
              type: object
              description: Identifies the Component that owns this run
              required:
                - projectName
                - componentName
              properties:
                projectName:
                  type: string
                  example: my-project
                componentName:
                  type: string
                  example: api-service
            workflow:
              $ref: '#/components/schemas/ComponentWorkflowRunConfig'
            ttlAfterCompletion:
              type: string
              description: Time-to-live after completion (e.g., "90d", "1h30m")
              example: '90d'
        status:
          type: object
          description: Observed state of the ComponentWorkflowRun
          properties:
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'
            imageStatus:
              type: object
              description: Built container image information
              properties:
                image:
                  type: string
                  description: Fully qualified image name
                  example: registry.example.com/my-namespace/api-service:abc1234
            tasks:
              type: array
              description: Workflow tasks with execution status
              items:
                $ref: '#/components/schemas/WorkflowTask'
            startedAt:
              type: string
              format: date-time
              description: Timestamp when execution started
            completedAt:
              type: string
              format: date-time
              description: Timestamp when execution completed

    ComponentTraitList:
      type: object
      description: List of component traits
      required:
        - items
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ComponentTrait'

    ComponentTrait:
      type: object
      description: Trait attached to a component
      required:
        - name
        - instanceName
      properties:
        name:
          type: string
          description: Trait template name
          example: autoscaler
        instanceName:
          type: string
          description: Instance name for this trait attachment
          example: my-autoscaler
        parameters:
          type: object
          description: Trait parameters
          additionalProperties: true

    # -------------------------------------------------------------------------
    # Bindings
    # -------------------------------------------------------------------------
    # -------------------------------------------------------------------------
    # Component Releases
    # -------------------------------------------------------------------------
    ComponentReleaseList:
      type: object
      description: Paginated list of component releases
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ComponentRelease'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ComponentRelease:
      type: object
      description: ComponentRelease resource  immutable snapshot of a Component at release time (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the ComponentRelease (immutable once created)
          required:
            - owner
            - componentType
            - workload
          properties:
            owner:
              type: object
              description: Identifies the component and project this release belongs to
              required:
                - projectName
                - componentName
              properties:
                projectName:
                  type: string
                  example: my-project
                componentName:
                  type: string
                  example: api-service
            componentType:
              type: object
              description: Immutable snapshot of the ComponentType spec at release time
              additionalProperties: true
            traits:
              type: object
              description: Immutable snapshot of trait specs at release time (keyed by trait name)
              additionalProperties: true
            componentProfile:
              type: object
              description: Snapshot of component parameter values and trait configs at release time
              properties:
                parameters:
                  type: object
                  additionalProperties: true
                traits:
                  type: array
                  items:
                    $ref: '#/components/schemas/ComponentTrait'
            workload:
              type: object
              description: Immutable snapshot of the Workload spec at release time (with built image)
              additionalProperties: true
        status:
          type: object
          description: Observed state of the ComponentRelease

    # -------------------------------------------------------------------------
    # Release Bindings
    # -------------------------------------------------------------------------
    ReleaseBindingList:
      type: object
      description: Paginated list of release bindings
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ReleaseBinding'
        pagination:
          $ref: '#/components/schemas/Pagination'

    ReleaseBinding:
      type: object
      description: ReleaseBinding resource  binds a ComponentRelease to an Environment (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the ReleaseBinding
          required:
            - owner
            - environment
          properties:
            owner:
              type: object
              description: Identifies the component and project this binding belongs to
              required:
                - projectName
                - componentName
              properties:
                projectName:
                  type: string
                  example: my-project
                componentName:
                  type: string
                  example: api-service
            environment:
              type: string
              description: Target environment name (immutable once set)
              example: dev
            releaseName:
              type: string
              description: Name of the ComponentRelease to bind
              example: api-service-abc1234
            componentTypeEnvOverrides:
              type: object
              description: Environment-specific ComponentType parameter overrides
              additionalProperties: true
            traitOverrides:
              type: object
              description: Environment-specific trait overrides keyed by instanceName
              additionalProperties: true
            workloadOverrides:
              $ref: '#/components/schemas/WorkloadOverrides'
            state:
              type: string
              description: Controls whether resources are deployed or undeployed
              enum: [Active, Undeploy]
              default: Active
              example: Active
        status:
          type: object
          description: Observed state of the ReleaseBinding
          properties:
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'
            endpoints:
              type: array
              description: Resolved invoke URLs for each named workload endpoint
              items:
                type: object
                properties:
                  name:
                    type: string
                    description: Endpoint name
                    example: http
                  invokeURL:
                    type: string
                    description: Resolved public URL
                    example: https://api.example.com

    WorkloadOverrides:
      type: object
      description: Environment-specific workload overrides
      properties:
        containers:
          type: object
          description: Container overrides keyed by container name
          additionalProperties:
            $ref: '#/components/schemas/ContainerOverride'

    ContainerOverride:
      type: object
      description: Container-level overrides
      properties:
        env:
          type: array
          items:
            $ref: '#/components/schemas/EnvVar'
        files:
          type: array
          items:
            $ref: '#/components/schemas/FileVar'

    EnvVar:
      type: object
      description: Environment variable
      required:
        - key
      properties:
        key:
          type: string
          description: Variable key/name
          example: DATABASE_URL
        value:
          type: string
          description: Variable value
          example: postgres://localhost:5432/db
        valueFrom:
          $ref: '#/components/schemas/EnvVarValueFrom'

    EnvVarValueFrom:
      type: object
      description: Value source reference
      properties:
        secretRef:
          type: object
          description: Secret reference
          properties:
            name:
              type: string
              description: Secret name
            key:
              type: string
              description: Secret key

    FileVar:
      type: object
      description: File mount variable
      required:
        - key
        - mountPath
      properties:
        key:
          type: string
          description: File key/name
          example: config.yaml
        mountPath:
          type: string
          description: Mount path in container
          example: /app/config
        value:
          type: string
          description: File content
        valueFrom:
          $ref: '#/components/schemas/EnvVarValueFrom'

    # -------------------------------------------------------------------------
    # Release
    # -------------------------------------------------------------------------
    Release:
      type: object
      description: Deployed release with Kubernetes resources
      properties:
        spec:
          type: object
          description: Release specification
          properties:
            resources:
              type: array
              description: Kubernetes resources in this release
              items:
                type: object
                additionalProperties: true
        status:
          type: object
          description: Release status
          additionalProperties: true

    # -------------------------------------------------------------------------
    # Deploy/Promote Requests
    # -------------------------------------------------------------------------
    DeployReleaseRequest:
      type: object
      description: Request to deploy a release
      required:
        - releaseName
      properties:
        releaseName:
          type: string
          description: Component release name to deploy
          example: v1.0.0

    PromoteComponentRequest:
      type: object
      description: Request to promote a component between environments
      required:
        - sourceEnv
        - targetEnv
      properties:
        sourceEnv:
          type: string
          description: Source environment name
          example: dev
        targetEnv:
          type: string
          description: Target environment name
          example: staging

    # -------------------------------------------------------------------------
    # Authorization Schemas
    # -------------------------------------------------------------------------
    MessageResponse:
      type: object
      description: Simple message response
      required:
        - message
      properties:
        message:
          type: string
          description: Response message
          example: Operation completed successfully

    Role:
      type: object
      description: Authorization role with permitted actions
      required:
        - name
        - actions
      properties:
        name:
          type: string
          description: Unique role name
          example: admin
        actions:
          type: array
          description: List of actions this role permits
          items:
            type: string
          example: ['read', 'write', 'delete']
        namespace:
          type: string
          description: Namespace for namespace-scoped roles, empty for cluster roles
          example: my-namespace
        description:
          type: string
          description: Human-readable description of the role
          example: Full administrative access

    UpdateRoleRequest:
      type: object
      description: Request to update a role's actions
      required:
        - actions
      properties:
        actions:
          type: array
          description: New list of actions for the role
          items:
            type: string
          example: ['read', 'write']

    Entitlement:
      type: object
      description: Entitlement with claim and value
      required:
        - claim
        - value
      properties:
        claim:
          type: string
          description: JWT claim name
          example: group
        value:
          type: string
          description: Entitlement value
          example: admin-group

    ResourceHierarchy:
      type: object
      description: Resource hierarchy scope
      properties:
        namespace:
          type: string
          description: Namespace name
          example: my-namespace
        project:
          type: string
          description: Project name
          example: my-project
        component:
          type: string
          description: Component name
          example: api-service

    TargetPath:
      type: object
      description: Target resource path within a namespace (project/component only)
      properties:
        project:
          type: string
          description: Project name
          example: my-project
        component:
          type: string
          description: Component name
          example: api-service

    AuthzContext:
      type: object
      description: Additional context for authorization
      additionalProperties: true

    RoleEntitlementMapping:
      type: object
      description: Mapping of a role to an entitlement within a scope
      required:
        - name
        - role
        - entitlement
        - hierarchy
        - effect
      properties:
        name:
          type: string
          description: Unique mapping name
          example: admin-binding
        role:
          $ref: '#/components/schemas/RoleRef'
        entitlement:
          $ref: '#/components/schemas/Entitlement'
        hierarchy:
          $ref: '#/components/schemas/ResourceHierarchy'
        effect:
          type: string
          description: Policy effect (allow or deny)
          enum: [allow, deny]
          default: allow
          example: allow
        context:
          $ref: '#/components/schemas/AuthzContext'

    UpdateRoleMappingRequest:
      type: object
      description: Request to update a role mapping
      required:
        - role
        - entitlement
        - hierarchy
        - effect
      properties:
        role:
          $ref: '#/components/schemas/RoleRef'
        entitlement:
          $ref: '#/components/schemas/Entitlement'
        hierarchy:
          $ref: '#/components/schemas/ResourceHierarchy'
        effect:
          type: string
          description: Policy effect (allow or deny)
          enum: [allow, deny]
          default: allow
          example: allow
        context:
          $ref: '#/components/schemas/AuthzContext'

    SubjectContext:
      type: object
      description: Authenticated subject context
      required:
        - type
        - entitlement_claim
        - entitlement_values
      properties:
        type:
          type: string
          description: Subject type
          enum: [user, service_account]
          example: user
        entitlement_claim:
          type: string
          description: Entitlement claim name
          example: group
        entitlement_values:
          type: array
          description: Entitlement values
          items:
            type: string
          example: ['admin-group', 'dev-group']

    Resource:
      type: object
      description: Resource for authorization evaluation
      required:
        - type
        - hierarchy
      properties:
        type:
          type: string
          description: Resource type
          example: component
        id:
          type: string
          description: Resource ID
          example: api-service
        hierarchy:
          $ref: '#/components/schemas/ResourceHierarchy'

    EvaluateRequest:
      type: object
      description: Single authorization evaluation request
      required:
        - resource
        - action
        - subject_context
      properties:
        subject_context:
          $ref: '#/components/schemas/SubjectContext'
        resource:
          $ref: '#/components/schemas/Resource'
        action:
          type: string
          description: Action to evaluate
          example: read
        context:
          $ref: '#/components/schemas/AuthzContext'

    Decision:
      type: object
      description: Authorization decision
      required:
        - decision
      properties:
        decision:
          type: boolean
          description: Authorization result (true = allowed)
          example: true
        context:
          type: object
          description: Additional decision context
          properties:
            reason:
              type: string
              description: Reason for the decision
              example: User has admin role

    BatchEvaluateRequest:
      type: object
      description: Batch authorization evaluation request
      required:
        - requests
      properties:
        requests:
          type: array
          description: List of evaluation requests
          items:
            $ref: '#/components/schemas/EvaluateRequest'

    BatchEvaluateResponse:
      type: object
      description: Batch authorization evaluation response
      required:
        - decisions
      properties:
        decisions:
          type: array
          description: List of decisions (in same order as requests)
          items:
            $ref: '#/components/schemas/Decision'

    ActionCapability:
      type: object
      description: Capabilities for a specific action
      properties:
        allowed:
          type: array
          description: Resources where action is allowed
          items:
            $ref: '#/components/schemas/CapabilityResource'
        denied:
          type: array
          description: Resources where action is denied
          items:
            $ref: '#/components/schemas/CapabilityResource'

    CapabilityResource:
      type: object
      description: Resource with permission details
      properties:
        path:
          type: string
          description: Full resource path
          example: namespace/acme/project/payment
        constraints:
          type: object
          description: Additional instance-level restrictions
          additionalProperties: true

    UserCapabilitiesResponse:
      type: object
      description: User authorization profile response
      properties:
        user:
          $ref: '#/components/schemas/SubjectContext'
        capabilities:
          type: object
          description: Map of action to capabilities
          additionalProperties:
            $ref: '#/components/schemas/ActionCapability'
        evaluatedAt:
          type: string
          format: date-time
          description: Time when capabilities were evaluated
          example: '2025-01-06T10:00:00Z'

    ClusterRoleRef:
      type: object
      description: Reference to a cluster role by name only
      required:
        - name
      properties:
        name:
          type: string
          description: Cluster role name
          example: admin

    RoleRef:
      type: object
      description: Reference to a role by name and namespace
      required:
        - name
      properties:
        name:
          type: string
          description: Role name
          example: developer
        namespace:
          type: string
          description: Namespace for namespace-scoped roles, empty for cluster roles
          example: my-namespace

    CreateClusterRoleRequest:
      type: object
      description: Request to create a cluster-scoped role
      required:
        - name
        - actions
      properties:
        name:
          type: string
          description: Unique cluster role name
          example: cluster-admin
        actions:
          type: array
          description: List of actions this role permits
          items:
            type: string
          example: ['read', 'write', 'delete']
        description:
          type: string
          description: Human-readable description of the role
          example: Full cluster administration access

    UpdateClusterRoleRequest:
      type: object
      description: Request to update a cluster role
      required:
        - actions
      properties:
        actions:
          type: array
          description: List of actions this role permits
          items:
            type: string
          example: ['read', 'write']
        description:
          type: string
          description: Human-readable description of the role
          example: Updated cluster admin role

    CreateClusterRoleBindingRequest:
      type: object
      description: Request to create a cluster-scoped role binding
      required:
        - name
        - entitlement
        - role
      properties:
        name:
          type: string
          description: Unique cluster role binding name
          example: admin-binding
        entitlement:
          $ref: '#/components/schemas/Entitlement'
        role:
          type: string
          description: Cluster role name
          example: admin
        effect:
          type: string
          description: Policy effect (allow or deny)
          enum: [allow, deny]
          default: allow
          example: allow

    UpdateClusterRoleBindingRequest:
      type: object
      description: Request to update a cluster role binding
      required:
        - entitlement
        - role
        - effect
      properties:
        entitlement:
          $ref: '#/components/schemas/Entitlement'
        role:
          type: string
          description: Cluster role name
          example: admin
        effect:
          type: string
          description: Policy effect (allow or deny)
          enum: [allow, deny]
          default: allow
          example: allow

    CreateNamespaceRoleRequest:
      type: object
      description: Request to create a namespace-scoped role
      required:
        - name
        - actions
      properties:
        name:
          type: string
          description: Unique namespace role name
          example: developer
        actions:
          type: array
          description: List of actions this role permits
          items:
            type: string
          example: ['read', 'write']
        description:
          type: string
          description: Human-readable description of the role
          example: Developer access within namespace

    UpdateNamespaceRoleRequest:
      type: object
      description: Request to update a namespace role
      required:
        - actions
      properties:
        actions:
          type: array
          description: List of actions this role permits
          items:
            type: string
          example: ['read', 'write']
        description:
          type: string
          description: Human-readable description of the role
          example: Updated developer role

    CreateNamespaceRoleBindingRequest:
      type: object
      description: Request to create a namespace-scoped role binding
      required:
        - name
        - entitlement
        - role
      properties:
        name:
          type: string
          description: Unique namespace role binding name
          example: developer-binding
        entitlement:
          $ref: '#/components/schemas/Entitlement'
        role:
          $ref: '#/components/schemas/RoleRef'
        targetPath:
          $ref: '#/components/schemas/TargetPath'
        effect:
          type: string
          description: Policy effect (allow or deny)
          enum: [allow, deny]
          default: allow
          example: allow

    UpdateNamespaceRoleBindingRequest:
      type: object
      description: Request to update a namespace role binding
      required:
        - entitlement
        - role
        - targetPath
        - effect
      properties:
        entitlement:
          $ref: '#/components/schemas/Entitlement'
        role:
          $ref: '#/components/schemas/RoleRef'
        targetPath:
          $ref: '#/components/schemas/TargetPath'
        effect:
          type: string
          description: Policy effect (allow or deny)
          enum: [allow, deny]
          default: allow
          example: allow

    # -------------------------------------------------------------------------
    # Webhook Schemas
    # -------------------------------------------------------------------------
    WebhookEventResponse:
      type: object
      description: Response after processing a webhook event
      required:
        - success
        - message
        - triggeredBuilds
      properties:
        success:
          type: boolean
          description: Whether the webhook was processed successfully
          example: true
        message:
          type: string
          description: Status message
          example: Webhook processed successfully
        affectedComponents:
          type: array
          description: List of components affected by this webhook
          items:
            type: string
          example: ['api-service', 'web-app']
        triggeredBuilds:
          type: integer
          description: Number of builds triggered
          example: 2

    # -------------------------------------------------------------------------
    # Secret Reference Schemas
    # -------------------------------------------------------------------------
    SecretReferenceList:
      type: object
      description: Paginated list of secret references
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/SecretReference'
        pagination:
          $ref: '#/components/schemas/Pagination'

    SecretReference:
      type: object
      description: SecretReference resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the SecretReference
          required:
            - template
            - data
          properties:
            template:
              type: object
              description: Structure of the resulting Kubernetes Secret
              properties:
                type:
                  type: string
                  description: Kubernetes secret type
                  enum:
                    - Opaque
                    - kubernetes.io/dockerconfigjson
                    - kubernetes.io/dockercfg
                    - kubernetes.io/basic-auth
                    - kubernetes.io/ssh-auth
                    - kubernetes.io/tls
                    - bootstrap.kubernetes.io/token
                  default: Opaque
                  example: Opaque
                metadata:
                  type: object
                  description: Additional metadata for the generated secret
                  properties:
                    annotations:
                      type: object
                      additionalProperties:
                        type: string
                    labels:
                      type: object
                      additionalProperties:
                        type: string
            data:
              type: array
              description: Secret data sources mapping secret keys to external references
              minItems: 1
              items:
                $ref: '#/components/schemas/SecretDataSource'
            refreshInterval:
              type: string
              description: Refresh interval for secret sync (e.g., "1h", "30m")
              example: 1h
        status:
          type: object
          description: Observed state of the SecretReference
          properties:
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'
            lastRefreshTime:
              type: string
              format: date-time
              description: Last time the secret was refreshed
              example: '2025-01-06T11:00:00Z'
            secretStores:
              type: array
              description: Secret stores currently using this reference
              items:
                $ref: '#/components/schemas/SecretStoreReference'

    SecretStoreReference:
      type: object
      description: Reference to a secret store
      required:
        - name
        - kind
      properties:
        name:
          type: string
          description: Secret store name
          example: vault-store
        namespace:
          type: string
          description: Secret store namespace
          example: my-namespace
        kind:
          type: string
          description: Secret store kind
          example: SecretStore

    SecretDataSource:
      type: object
      description: Secret data source information
      required:
        - secretKey
        - remoteRef
      properties:
        secretKey:
          type: string
          description: Key in the Kubernetes secret
          example: database-password
        remoteRef:
          $ref: '#/components/schemas/RemoteReference'

    RemoteReference:
      type: object
      description: Remote secret reference
      required:
        - key
      properties:
        key:
          type: string
          description: Key in the external secret store
          example: prod/database/password
        property:
          type: string
          description: Property within the secret
          example: password
        version:
          type: string
          description: Secret version
          example: 1

    # -------------------------------------------------------------------------
    # Workload Schemas
    # -------------------------------------------------------------------------
    WorkloadList:
      type: object
      description: Paginated list of workloads
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Workload'
        pagination:
          $ref: '#/components/schemas/Pagination'

    Workload:
      type: object
      description: Workload resource defining source code for a component
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Workload specification
          additionalProperties: true
          example:
            containers:
              main:
                image: registry.example.com/my-namespace/api:v1.0.0
                ports:
                  - containerPort: 8080
            endpoints:
              - name: http
                port: 8080
        status:
          type: object
          description: Workload status
          properties:
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'

    WorkloadSpec:
      type: object
      description: Workload specification (source code definition)
      additionalProperties: true
      example:
        containers:
          main:
            image: registry.example.com/my-namespace/api:v1.0.0
            ports:
              - containerPort: 8080
        endpoints:
          - name: http
            port: 8080

    # -------------------------------------------------------------------------
    # Release List
    # -------------------------------------------------------------------------
    ReleaseList:
      type: object
      description: Paginated list of releases
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Release'
        pagination:
          $ref: '#/components/schemas/Pagination'

    # -------------------------------------------------------------------------
    # Deployment Pipeline Schemas
    # -------------------------------------------------------------------------
    DeploymentPipelineList:
      type: object
      description: Paginated list of deployment pipelines
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/DeploymentPipeline'
        pagination:
          $ref: '#/components/schemas/Pagination'

    DeploymentPipeline:
      type: object
      description: DeploymentPipeline resource (Kubernetes object without kind/apiVersion).
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/ObjectMeta'
        spec:
          type: object
          description: Desired state of the DeploymentPipeline
          properties:
            promotionPaths:
              type: array
              description: Promotion paths between environments
              items:
                $ref: '#/components/schemas/PromotionPath'
        status:
          type: object
          description: Observed state of the DeploymentPipeline
          properties:
            observedGeneration:
              type: integer
              format: int64
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/Condition'

    PromotionPath:
      type: object
      description: Promotion path between environments
      required:
        - sourceEnvironmentRef
        - targetEnvironmentRefs
      properties:
        sourceEnvironmentRef:
          type: string
          description: Source environment name
          example: dev
        targetEnvironmentRefs:
          type: array
          description: Target environments for promotion
          items:
            $ref: '#/components/schemas/TargetEnvironmentRef'

    TargetEnvironmentRef:
      type: object
      description: Target environment reference with approval settings
      required:
        - name
      properties:
        name:
          type: string
          description: Target environment name
          example: staging
        requiresApproval:
          type: boolean
          description: Whether promotion requires approval
          example: false
        isManualApprovalRequired:
          type: boolean
          description: Whether manual approval is required
          example: true

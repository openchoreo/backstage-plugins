openapi: 3.0.3
info:
  title: OpenChoreo API
  description: OpenChoreo platform API for managing organizations, projects, components, builds, and deployments
  version: 1.0.0
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html

servers:
  - url: /api/v1
    description: OpenChoreo API Server

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # Core response wrapper types
    APIResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          additionalProperties: true
        error:
          type: string
        code:
          type: string

    ListResponse:
      type: object
      properties:
        items:
          type: array
          items:
            type: object
            additionalProperties: true
        totalCount:
          type: integer
        page:
          type: integer
        pageSize:
          type: integer

    # Organization
    OrganizationResponse:
      type: object
      required:
        - name
        - createdAt
      properties:
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        namespace:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          type: string

    # Project
    ProjectResponse:
      type: object
      required:
        - name
        - orgName
        - createdAt
      properties:
        name:
          type: string
        orgName:
          type: string
        displayName:
          type: string
        description:
          type: string
        deploymentPipeline:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          type: string

    CreateProjectRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        deploymentPipeline:
          type: string

    # DeploymentPipeline
    DeploymentPipelineResponse:
      type: object
      required:
        - name
        - orgName
        - createdAt
      properties:
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        orgName:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          type: string
        promotionPaths:
          type: array
          items:
            $ref: '#/components/schemas/PromotionPath'

    PromotionPath:
      type: object
      required:
        - sourceEnvironmentRef
        - targetEnvironmentRefs
      properties:
        sourceEnvironmentRef:
          type: string
        targetEnvironmentRefs:
          type: array
          items:
            $ref: '#/components/schemas/TargetEnvironmentRef'

    TargetEnvironmentRef:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        requiresApproval:
          type: boolean
        isManualApprovalRequired:
          type: boolean

    # Component
    ComponentResponse:
      type: object
      required:
        - name
        - type
        - projectName
        - orgName
        - createdAt
      properties:
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        type:
          type: string
        projectName:
          type: string
        orgName:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          type: string
        service:
          type: object
          additionalProperties: true
        webApplication:
          type: object
          additionalProperties: true
        scheduledTask:
          type: object
          additionalProperties: true
        api:
          type: object
          additionalProperties: true
        workload:
          type: object
          additionalProperties: true
        buildConfig:
          $ref: '#/components/schemas/BuildConfig'

    BuildConfig:
      type: object
      required:
        - repoUrl
        - repoBranch
        - componentPath
        - buildTemplateRef
      properties:
        repoUrl:
          type: string
        repoBranch:
          type: string
        componentPath:
          type: string
        buildTemplateRef:
          type: string
        buildTemplateParams:
          type: array
          items:
            $ref: '#/components/schemas/TemplateParameter'

    TemplateParameter:
      type: object
      required:
        - name
        - value
      properties:
        name:
          type: string
        value:
          type: string

    CreateComponentRequest:
      type: object
      required:
        - name
        - type
      properties:
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        type:
          type: string
        buildConfig:
          $ref: '#/components/schemas/BuildConfig'

    # Environment
    EnvironmentResponse:
      type: object
      required:
        - name
        - namespace
        - isProduction
        - createdAt
      properties:
        name:
          type: string
        namespace:
          type: string
        displayName:
          type: string
        description:
          type: string
        dataPlaneRef:
          type: string
        isProduction:
          type: boolean
        dnsPrefix:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          type: string

    CreateEnvironmentRequest:
      type: object
      required:
        - name
        - isProduction
      properties:
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        dataPlaneRef:
          type: string
        isProduction:
          type: boolean
        dnsPrefix:
          type: string

    # DataPlane
    DataPlaneResponse:
      type: object
      required:
        - name
        - namespace
        - kubernetesClusterName
        - apiServerURL
        - publicVirtualHost
        - organizationVirtualHost
        - createdAt
      properties:
        name:
          type: string
        namespace:
          type: string
        displayName:
          type: string
        description:
          type: string
        imagePullSecretRefs:
          type: array
          items:
            type: string
        secretStoreRef:
          type: string
        kubernetesClusterName:
          type: string
        apiServerURL:
          type: string
        publicVirtualHost:
          type: string
        organizationVirtualHost:
          type: string
        observerURL:
          type: string
        observerUsername:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          type: string

    CreateDataPlaneRequest:
      type: object
      required:
        - name
        - kubernetesClusterName
        - apiServerURL
        - caCert
        - clientCert
        - clientKey
        - publicVirtualHost
        - organizationVirtualHost
      properties:
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        kubernetesClusterName:
          type: string
        apiServerURL:
          type: string
        caCert:
          type: string
        clientCert:
          type: string
        clientKey:
          type: string
        publicVirtualHost:
          type: string
        organizationVirtualHost:
          type: string
        observerURL:
          type: string
        observerUsername:
          type: string
        observerPassword:
          type: string

    # BuildPlane
    BuildPlaneResponse:
      type: object
      required:
        - name
        - namespace
        - kubernetesClusterName
        - apiServerURL
        - createdAt
      properties:
        name:
          type: string
        namespace:
          type: string
        displayName:
          type: string
        description:
          type: string
        kubernetesClusterName:
          type: string
        apiServerURL:
          type: string
        observerURL:
          type: string
        observerUsername:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          type: string

    # Build
    BuildResponse:
      type: object
      required:
        - name
        - uuid
        - componentName
        - projectName
        - orgName
        - createdAt
      properties:
        name:
          type: string
        uuid:
          type: string
        componentName:
          type: string
        projectName:
          type: string
        orgName:
          type: string
        commit:
          type: string
        status:
          type: string
        createdAt:
          type: string
          format: date-time
        image:
          type: string

    # BuildTemplate
    BuildTemplateResponse:
      type: object
      required:
        - name
        - createdAt
      properties:
        name:
          type: string
        parameters:
          type: array
          items:
            $ref: '#/components/schemas/BuildTemplateParameter'
        createdAt:
          type: string
          format: date-time

    BuildTemplateParameter:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        default:
          type: string

    # ComponentType
    ComponentTypeResponse:
      type: object
      required:
        - name
        - workloadType
        - createdAt
      properties:
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        workloadType:
          type: string
        allowedWorkflows:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time

    # Workflow
    WorkflowResponse:
      type: object
      required:
        - name
        - createdAt
      properties:
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        createdAt:
          type: string
          format: date-time

    # Trait
    TraitResponse:
      type: object
      required:
        - name
        - createdAt
      properties:
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        createdAt:
          type: string
          format: date-time

    # Binding
    BindingResponse:
      type: object
      required:
        - name
        - type
        - componentName
        - projectName
        - orgName
        - environment
        - status
      properties:
        name:
          type: string
        type:
          type: string
        componentName:
          type: string
        projectName:
          type: string
        orgName:
          type: string
        environment:
          type: string
        status:
          $ref: '#/components/schemas/BindingStatus'
        serviceBinding:
          $ref: '#/components/schemas/ServiceBinding'
        webApplicationBinding:
          $ref: '#/components/schemas/WebApplicationBinding'
        scheduledTaskBinding:
          $ref: '#/components/schemas/ScheduledTaskBinding'

    BindingStatus:
      type: object
      required:
        - reason
        - message
        - status
        - lastTransitioned
      properties:
        reason:
          type: string
        message:
          type: string
        status:
          type: string
          enum: [InProgress, Active, Failed, Suspended, NotYetDeployed]
        lastTransitioned:
          type: string
          format: date-time

    ServiceBinding:
      type: object
      properties:
        endpoints:
          type: array
          items:
            $ref: '#/components/schemas/EndpointStatus'
        image:
          type: string
        releaseState:
          type: string

    WebApplicationBinding:
      type: object
      properties:
        endpoints:
          type: array
          items:
            $ref: '#/components/schemas/EndpointStatus'
        image:
          type: string
        releaseState:
          type: string

    ScheduledTaskBinding:
      type: object
      properties:
        image:
          type: string
        releaseState:
          type: string

    EndpointStatus:
      type: object
      required:
        - name
        - type
      properties:
        name:
          type: string
        type:
          type: string
        project:
          $ref: '#/components/schemas/ExposedEndpoint'
        organization:
          $ref: '#/components/schemas/ExposedEndpoint'
        public:
          $ref: '#/components/schemas/ExposedEndpoint'

    ExposedEndpoint:
      type: object
      required:
        - host
        - port
      properties:
        host:
          type: string
        port:
          type: integer
        scheme:
          type: string
        basePath:
          type: string
        uri:
          type: string

    UpdateBindingRequest:
      type: object
      required:
        - releaseState
      properties:
        releaseState:
          type: string
          enum: [Active, Suspend, Undeploy]

    # Promotion
    PromoteComponentRequest:
      type: object
      required:
        - sourceEnv
        - targetEnv
      properties:
        sourceEnv:
          type: string
        targetEnv:
          type: string

    # Workload
    WorkloadResponse:
      type: object
      properties:
        name:
          type: string
        type:
          type: string
          enum:
            - Service
            - ManualTask
            - ScheduledTask
            - WebApplication
          description: The workload type determines how the workload is deployed
        owner:
          $ref: '#/components/schemas/WorkloadOwner'
        metadata:
          type: object
          additionalProperties: true
        spec:
          type: object
          additionalProperties: true
        containers:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/Container'
        endpoints:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/WorkloadEndpoint'
        connections:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/Connection'

    # Observer URL
    ObserverUrlData:
      type: object
      properties:
        observerUrl:
          type: string

    EnvVar:
      type: object
      required:
        - key
      properties:
        key:
          type: string
        value:
          type: string
        valueFrom:
          type: object
          properties:
            configurationGroupRef:
              type: object
              properties:
                name:
                  type: string
                key:
                  type: string

    Container:
      type: object
      required:
        - image
      properties:
        image:
          type: string
        command:
          type: array
          items:
            type: string
        args:
          type: array
          items:
            type: string
        env:
          type: array
          items:
            $ref: '#/components/schemas/EnvVar'

    WorkloadEndpoint:
      type: object
      required:
        - type
        - port
      properties:
        type:
          type: string
          enum: ['TCP', 'UDP', 'HTTP', 'REST', 'gRPC', 'Websocket', 'GraphQL']
        port:
          type: integer
        schema:
          $ref: '#/components/schemas/Schema'

    Connection:
      type: object
      required:
        - params
        - type
      properties:
        inject:
          $ref: '#/components/schemas/ConnectionInject'
        params:
          $ref: '#/components/schemas/ConnectionParams'
        type:
          type: string

    WorkloadOwner:
      type: object
      required:
        - projectName
        - componentName
      properties:
        projectName:
          type: string
        componentName:
          type: string

    ConnectionParams:
      type: object
      required:
        - componentName
        - endpoint
        - projectName
      properties:
        componentName:
          type: string
        endpoint:
          type: string
        projectName:
          type: string

    ConnectionInject:
      type: object
      properties:
        env:
          type: array
          items:
            $ref: '#/components/schemas/ConnectionInjectEnv'

    ConnectionInjectEnv:
      type: object
      required:
        - name
        - value
      properties:
        name:
          type: string
        value:
          type: string

    Schema:
      type: object
      properties:
        type:
          type: string
        content:
          type: string

security:
  - BearerAuth: []

paths:
  # Health check
  /health:
    get:
      summary: Health check endpoint
      operationId: health
      tags:
        - Health
      security: []
      responses:
        '200':
          description: Service is healthy
          content:
            text/plain:
              schema:
                type: string

  /ready:
    get:
      summary: Readiness check endpoint
      operationId: ready
      tags:
        - Health
      security: []
      responses:
        '200':
          description: Service is ready
          content:
            text/plain:
              schema:
                type: string

  # Apply/Delete operations (kubectl-like)
  /apply:
    post:
      summary: Apply a resource (kubectl-like)
      operationId: applyResource
      tags:
        - Resources
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: Kubernetes-style resource definition
              additionalProperties: true
      responses:
        '200':
          description: Resource applied successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '201':
          description: Resource created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'

  /delete:
    delete:
      summary: Delete a resource (kubectl-like)
      operationId: deleteResource
      tags:
        - Resources
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: Kubernetes-style resource definition
              additionalProperties: true
      responses:
        '200':
          description: Resource deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'

  # Organizations
  /orgs:
    get:
      summary: List all organizations
      operationId: listOrganizations
      tags:
        - Organizations
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/OrganizationResponse'

  /orgs/{orgName}:
    get:
      summary: Get a specific organization
      operationId: getOrganization
      tags:
        - Organizations
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/OrganizationResponse'

  # DataPlanes
  /orgs/{orgName}/dataplanes:
    get:
      summary: List all data planes
      operationId: listDataPlanes
      tags:
        - DataPlanes
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/DataPlaneResponse'

    post:
      summary: Create a new data plane
      operationId: createDataPlane
      tags:
        - DataPlanes
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDataPlaneRequest'
      responses:
        '201':
          description: Data plane created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/DataPlaneResponse'

  /orgs/{orgName}/dataplanes/{dpName}:
    get:
      summary: Get a specific data plane
      operationId: getDataPlane
      tags:
        - DataPlanes
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: dpName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/DataPlaneResponse'

  # Environments
  /orgs/{orgName}/environments:
    get:
      summary: List all environments
      operationId: listEnvironments
      tags:
        - Environments
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/EnvironmentResponse'

    post:
      summary: Create a new environment
      operationId: createEnvironment
      tags:
        - Environments
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEnvironmentRequest'
      responses:
        '201':
          description: Environment created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/EnvironmentResponse'

  /orgs/{orgName}/environments/{envName}:
    get:
      summary: Get a specific environment
      operationId: getEnvironment
      tags:
        - Environments
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: envName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/EnvironmentResponse'

  # BuildPlanes
  /orgs/{orgName}/buildplanes:
    get:
      summary: List build planes
      operationId: listBuildPlanes
      tags:
        - BuildPlanes
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/BuildPlaneResponse'

  # Build Templates
  /orgs/{orgName}/build-templates:
    get:
      summary: List build templates for an organization
      operationId: listBuildTemplates
      tags:
        - Builds
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/BuildTemplateResponse'

  # ComponentTypes
  /orgs/{orgName}/component-types:
    get:
      summary: List all component types for an organization
      operationId: listComponentTypes
      tags:
        - ComponentTypes
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/ComponentTypeResponse'

  /orgs/{orgName}/component-types/{ctName}/schema:
    get:
      summary: Get the JSON schema for a specific component type
      operationId: getComponentTypeSchema
      tags:
        - ComponentTypes
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: ctName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        description: JSON Schema for the component type
                        additionalProperties: true
        '404':
          description: Component type not found

  # Workflows
  /orgs/{orgName}/workflows:
    get:
      summary: List all workflows for an organization
      operationId: listWorkflows
      tags:
        - Workflows
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/WorkflowResponse'

  /orgs/{orgName}/workflows/{workflowName}/schema:
    get:
      summary: Get the JSON schema for a specific workflow
      operationId: getWorkflowSchema
      tags:
        - Workflows
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: workflowName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        description: JSON Schema for the workflow
                        additionalProperties: true
        '404':
          description: Workflow not found

  # Traits
  /orgs/{orgName}/traits:
    get:
      summary: List all traits for an organization
      operationId: listTraits
      tags:
        - Traits
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/TraitResponse'

  /orgs/{orgName}/traits/{traitName}/schema:
    get:
      summary: Get the JSON schema for a specific trait
      operationId: getTraitSchema
      tags:
        - Traits
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: traitName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        description: JSON Schema for the trait
                        additionalProperties: true
        '404':
          description: Trait not found

  # Projects
  /orgs/{orgName}/projects:
    get:
      summary: List all projects in an organization
      operationId: listProjects
      tags:
        - Projects
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/ProjectResponse'

    post:
      summary: Create a new project
      operationId: createProject
      tags:
        - Projects
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProjectRequest'
      responses:
        '201':
          description: Project created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ProjectResponse'

  /orgs/{orgName}/projects/{projectName}:
    get:
      summary: Get a specific project
      operationId: getProject
      tags:
        - Projects
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ProjectResponse'

  /orgs/{orgName}/projects/{projectName}/deployment-pipeline:
    get:
      summary: Get project deployment pipeline
      operationId: getProjectDeploymentPipeline
      tags:
        - Projects
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/DeploymentPipelineResponse'

  # Components
  /orgs/{orgName}/projects/{projectName}/components:
    get:
      summary: List all components in a project
      operationId: listComponents
      tags:
        - Components
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/ComponentResponse'

    post:
      summary: Create a new component
      operationId: createComponent
      tags:
        - Components
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateComponentRequest'
      responses:
        '201':
          description: Component created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ComponentResponse'

  /orgs/{orgName}/projects/{projectName}/components/{componentName}:
    get:
      summary: Get a specific component
      operationId: getComponent
      tags:
        - Components
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
        - name: componentName
          in: path
          required: true
          schema:
            type: string
        - name: include
          in: query
          required: false
          schema:
            type: string
            description: Comma-separated list of additional resources to include (e.g., "type,workload")
          description: Additional resources to include in the response. Valid values are "type" and "workload".
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ComponentResponse'

  # Component Bindings
  /orgs/{orgName}/projects/{projectName}/components/{componentName}/bindings:
    get:
      summary: Get component bindings
      operationId: getComponentBinding
      tags:
        - Bindings
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
        - name: componentName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/BindingResponse'

  /orgs/{orgName}/projects/{projectName}/components/{componentName}/bindings/{bindingName}:
    patch:
      summary: Update a component binding
      operationId: updateComponentBinding
      tags:
        - Bindings
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
        - name: componentName
          in: path
          required: true
          schema:
            type: string
        - name: bindingName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBindingRequest'
      responses:
        '200':
          description: Binding updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'

  # Component Promotion
  /orgs/{orgName}/projects/{projectName}/components/{componentName}/promote:
    post:
      summary: Promote component to environment
      operationId: promoteComponent
      tags:
        - Deployment
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
        - name: componentName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromoteComponentRequest'
      responses:
        '200':
          description: Component promoted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/BindingResponse'

  # Builds
  /orgs/{orgName}/projects/{projectName}/components/{componentName}/builds:
    post:
      summary: Trigger a new build
      operationId: triggerBuild
      tags:
        - Builds
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
        - name: componentName
          in: path
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Build triggered successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BuildResponse'

    get:
      summary: List builds for a component
      operationId: listBuilds
      tags:
        - Builds
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
        - name: componentName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/ListResponse'
                          - type: object
                            properties:
                              items:
                                type: array
                                items:
                                  $ref: '#/components/schemas/BuildResponse'

  # Observer URLs
  /orgs/{orgName}/projects/{projectName}/components/{componentName}/environments/{environmentName}/observer-url:
    get:
      summary: Get runtime logs observer URL
      operationId: getComponentObserverURL
      tags:
        - Observability
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
        - name: componentName
          in: path
          required: true
          schema:
            type: string
        - name: environmentName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ObserverUrlData'

  /orgs/{orgName}/projects/{projectName}/components/{componentName}/observer-url:
    get:
      summary: Get build logs observer URL
      operationId: getBuildObserverURL
      tags:
        - Observability
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
        - name: componentName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ObserverUrlData'

  # Workloads
  /orgs/{orgName}/projects/{projectName}/components/{componentName}/workloads:
    post:
      summary: Create or update workload
      operationId: createWorkload
      tags:
        - Workloads
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
        - name: componentName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: Workload specification
              additionalProperties: true
      responses:
        '200':
          description: Workload created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/WorkloadResponse'

    get:
      summary: Get workload for component
      operationId: getWorkloads
      tags:
        - Workloads
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projectName
          in: path
          required: true
          schema:
            type: string
        - name: componentName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/WorkloadResponse'
